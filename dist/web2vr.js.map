{"version":3,"sources":["webpack://Web2VR/webpack/universalModuleDefinition","webpack://Web2VR/webpack/bootstrap","webpack://Web2VR/./node_modules/aframe-gif-shader/dist/aframe-gif-shader.js","webpack://Web2VR/./node_modules/deepmerge/dist/cjs.js","webpack://Web2VR/./node_modules/super-hands/index.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/clickable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/drag-droppable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/draggable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/droppable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/grabbable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/hoverable.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/prototypes/buttons-proto.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/prototypes/physics-grab-proto.js","webpack://Web2VR/./node_modules/super-hands/reaction_components/stretchable.js","webpack://Web2VR/./node_modules/super-hands/systems/super-hands-system.js","webpack://Web2VR/./src/aframeContext.js","webpack://Web2VR/./src/assetManager.js","webpack://Web2VR/./src/components/animate.js","webpack://Web2VR/./src/components/border.js","webpack://Web2VR/./src/components/grabRotateStatic.js","webpack://Web2VR/./src/components/renderer.js","webpack://Web2VR/./src/components/scrollbar.js","webpack://Web2VR/./src/elements/buttonElement.js","webpack://Web2VR/./src/elements/canvasElement.js","webpack://Web2VR/./src/elements/checkboxElement.js","webpack://Web2VR/./src/elements/containerElement.js","webpack://Web2VR/./src/elements/element.js","webpack://Web2VR/./src/elements/imageElement.js","webpack://Web2VR/./src/elements/inputElement.js","webpack://Web2VR/./src/elements/radioElement.js","webpack://Web2VR/./src/elements/svgElement.js","webpack://Web2VR/./src/elements/textElement.js","webpack://Web2VR/./src/elements/videoElement.js","webpack://Web2VR/./src/plugins/aframe-keyboard.min.js","webpack://Web2VR/./src/plugins/eventListenerListPlugin.js","webpack://Web2VR/./src/scroll.js","webpack://Web2VR/./src/settings.js","webpack://Web2VR/./src/utils/helper.js","webpack://Web2VR/./src/utils/mouseEventHandler.js","webpack://Web2VR/./src/utils/position.js","webpack://Web2VR/./src/web2vr.js","webpack://Web2VR/external \"aframe\""],"names":["AframeContext","settings","inVR","createScene","assetManager","AssetManager","scene","document","getElementsByTagName","length","createElement","body","appendChild","newScene","debug","setAttribute","addEventListener","bind","web2vr","container","classList","add","interactiveTag","width","parseFloat","window","getComputedStyle","scale","x","position","object3D","set","y","z","rotation","parentElement","querySelector","parentSelector","skybox","sky","getElementById","cursor","id","createControllers","raycaster","raycasterFar","superhands","leftHand","rightHand","assets","currentAssetId","parseInt","getAttribute","path","type","getChildren","asset","createAsset","updateCurrentAssetId","remove","AFRAME","registerComponent","init","running","el","element","domElement","startAnimation","stopAnimation","tick","update","schema","color","plane","children","edges","THREE","EdgesGeometry","geometry","line","LineSegments","LineBasicMaterial","linewidth","borderObject","aframe","clippingContext","material","clippingPlanes","planes","needsUpdate","borderWidth","data","lineWidth","borderColor","Color","updateBorder","visible","clone","layerStep","components","grabbed","scroll","hasScroll","elements","updateClipping","obj","hand","grabbers","Math","atan2","sceneEl","renderer","localClippingEnabled","evt","scrollHeight","firstElementChild","style","height","scrollWindowHeight","scrollContainer","clientHeight","scrollY","detail","intersection","uv","shift","pointer","setY","pointEndY","pointStartY","play","scrollbar","setX","setZ","ButtomElement","layer","tagName","textValue","value","replace","TextElement","CanvasElement","imageId","entity","src","assetId","getAsset","removeAsset","updateImage","toDataURL","Element","CheckBoxElement","specificUpdate","checked","ContainerElement","textOnly","console","log","click","expImageId","oldBackgroundImage","oldDomPosition","backgroundColor","backgroundImage","experimental","equalsDOMPosition","customId","html2canvasIDcounter","html2canvas","onclone","head","sheet","insertRule","removeAttribute","then","canvas","Helper","isUrl","substring","lastIndexOf","updateOpacity","domPosition","alpha","split","a","b","opacity","childElements","Set","contains","paddingToMargin","Position","getBoundingClientRect","parentTransform","initHover","mouseEventHandle","MouseEventHandler","resync","animationDuration","transitionDuration","tag","hoverSelectors","has","toLowerCase","classes","cls","push","transform","hoverTransform","depth","startDepth","querySelectorAll","textContent","trim","right","paddingRight","marginRight","initEventHandlers","setupClipping","clientRect","aframePosition","scrollBody","updatePosition","checkVisible","visibility","display","listeningForMouseEvents","checkAnimation","updateTransform","matrixType","values","map","v","matrix","Matrix4","fromArray","Vector3","quaternion","Quaternion","decompose","scalingFactor","setFromRotationMatrix","scaleX","sqrt","scaleY","border","borderTopWidth","borderTopColor","normal","normalMatrix","Matrix3","getNormalMatrix","matrixWorld","output","applyMatrix3","normalize","parentNode","overflow","forceClipping","authority","bottom","Plane","rotateNormal","top","left","getClippingContext","setTimeout","bottomLocal","multiplyScalar","topLocal","leftLocal","rightLocal","bottomGlobal","localToWorld","topGlobal","leftGlobal","rightGlobal","setFromNormalAndCoplanarPoint","showClipping","clippingPlaneHelpers","MeshBasicMaterial","side","DoubleSide","PlaneGeometry","mesh","Mesh","debugPlane","axisHelper","AxesHelper","helper","worldPos","getWorldPosition","point","projectPoint","focalPoint","lookAt","ImageElement","currentSrc","changed","loaded","assetID","isGif","test","InputElement","active","camera","parent","keyboard","copy","degToRad","translateX","translateY","translateZ","activeInput","placeholder","RadioElement","SvgElement","svgString","XMLSerializer","serializeToString","ctx","getContext","DOMURL","self","URL","webkitURL","img","Image","svg","Blob","url","createObjectURL","onload","drawImage","revokeObjectURL","svgToImage","text","fragmentShader","vertexShader","clipping","align","textAlign","includes","lineHeight","currentFont","common","actualFontSize","fontSize","widthInPixels","wrapPixels","textColor","updateTextSize","updateTextAlignment","updateText","updateTextColor","VideoElement","video360","current360Src","createClickEvent","hasAttribute","image","pause","texture","VideoTexture","minFilter","LinearFilter","magFilter","format","RGBAFormat","paused","muted","e","t","d","exports","n","i","l","call","m","c","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","__esModule","create","prototype","hasOwnProperty","p","s","mode","template","AFK","Error","audio","highlightColor","dismissable","font","locale","model","baseTexture","keyTexture","verticalAlign","draw","attachEventListeners","handleKeyboardPress","handleKeyboardVR","removeEventListeners","removeEventListener","key","charCodeAt","keyCode","target","CustomEvent","code","dispatchEvent","toggleActiveMode","Event","isMouseEnter","keyboardKeys","activeMode","drawKeyboard","size","firstChild","removeChild","parseKeyObjects","drawButton","name","alt","forEach","_addEventListener","handle","useCapture","eventListenerList","node","eventDetail","addedEvent","_removeEventListener","filter","listener","toString","removedEvent","Scroll","checkScrollbar","createScrollbar","scrollingElement","Settings","ignoreTags","string","regexp","min","max","checkEntityEvents","mouseEvents","mouseProperties","hasMouseEventRegistered","mouseEvent","hasMouseProperty","mouseProperty","addMouseListeners","removeMouseListeners","MouseEvent","eventName","mouseEventHandler","calculateAFramePosition","Web2VR","nodeType","Node","ELEMENT_NODE","Deepmerge","arrayMerge","destination","source","utils","device","isMobile","isOculusBrowser","observer","observerConfig","childList","subtree","characterData","attributes","updating","styleSheets","styleSheet","cssRules","rule","CSSStyleRule","selectors","selectorText","selector","sel","substr","error","svgDomElement","styleDefs","sheets","rules","j","elems","cssText","innerHTML","defs","insertBefore","findHoverCss","hasLoaded","once","createContainer","createSky","convertToVR","allLoadedUpdate","interval","setInterval","allLoaded","clearInterval","TEXT_NODE","nodeValue","span","disconnect","replaceWith","observe","ButtonElement","onLoaded","event","child","removeElement","currentNode","generateStyleDefs","addElement","childNodes","addElementChildren","MutationObserver","mutations","mutation","emptyRemove","removedNodes","addedNodes","err"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA,6BAA6B;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;AAEA,qGAAqG,mBAAmB,EAAE,mBAAmB,kGAAkG;;AAE/O;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,WAAW;AACX;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,aAAa,gBAAgB;AAC7B,WAAW,gBAAgB;;AAE3B;AACA,WAAW,gBAAgB;AAC3B,gBAAgB;;AAEhB,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA,kDAAkD,sBAAsB;AACxE;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN,IAAI;;;AAGJ;AACA;AACA,cAAc,OAAO;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,OAAO;AACrB,iBAAiB,OAAO;AACxB,iBAAiB,OAAO;AACxB,iBAAiB,MAAM;AACvB,iBAAiB,OAAO;AACxB,iBAAiB,MAAM;AACvB,iBAAiB,KAAK;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,UAAU;AACV;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,IAAI;;;AAGJ;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV,QAAQ;AACR,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,MAAM;AACN;AACA,IAAI;;;AAGJ;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,MAAM;AACN;AACA,eAAe;AACf;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,cAAc,MAAM;AACpB,cAAc,OAAO;AACrB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,UAAU;AACV,yDAAyD;AACzD;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,QAAQ;AACR,yDAAyD;AACzD;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACrqBa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE,IAAI;AACN;;AAEA;;AAEA;;;;;;;;;;;;ACpIA;;AAEA;AACA;AACA;;AAEA,mBAAO,CAAC,iGAAiC;AACzC,mBAAO,CAAC,uGAAoC;AAC5C,mBAAO,CAAC,uGAAoC;AAC5C,mBAAO,CAAC,2GAAsC;AAC9C,mBAAO,CAAC,iHAAyC;AACjD,mBAAO,CAAC,uGAAoC;AAC5C,mBAAO,CAAC,uGAAoC;AAC5C,mBAAO,CAAC,uGAAoC;;AAE5C;AACA;AACA;AACA;AACA;AACA,oBAAoB,eAAe;AACnC,4BAA4B,cAAc;AAC1C,uBAAuB,kBAAkB;AACzC,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe;AACf,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;;AAEA;AACA;AACA,qBAAqB,uCAAuC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,oBAAoB;AACpB;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gCAAgC;AAC/C;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA,OAAO;AACP;AACA,oBAAoB,UAAU,YAAY,EAAE;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACjB;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B;AAC3B,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,gBAAgB;AACnE;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,gBAAgB;AACnE;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,GAAG;AACH;AACA,4CAA4C,+BAA+B;AAC3E;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,gBAAgB;AACrC;AACA;AACA;AACA,KAAK;AACL,qBAAqB,gBAAgB;AACrC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,cAAc;AACxD;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACxhBD;AACA,mBAAmB,mBAAO,CAAC,iHAA+B;AAC1D,gEAAgE;AAChE;AACA,cAAc;AACd,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,2DAA2D;AAC3D;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,GAAG;AACH;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,CAAC;;;;;;;;;;;;ACxCD;AACA;AACA,mBAAmB,mBAAO,CAAC,iHAA+B;;AAE1D,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,mCAAmC;AACnC;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA,CAAC;;;;;;;;;;;;ACvDD;AACA;AACA,mBAAmB,mBAAO,CAAC,iHAA+B;;AAE1D,gDAAgD;AAChD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,2DAA2D;AAC3D;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,yDAAyD;AACzD;AACA,6BAA6B;AAC7B;AACA,CAAC;;;;;;;;;;;;AC9BD;AACA;AACA,mBAAmB;AACnB,6BAA6B;AAC7B,iCAAiC;AACjC;AACA;AACA;AACA,cAAc,YAAY;AAC1B,iBAAiB,cAAc;AAC/B,kBAAkB,YAAY;AAC9B,kBAAkB;AAClB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,+BAA+B;AAC/B;AACA,GAAG;AACH;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,6CAA6C,YAAY;AACzD;AACA;AACA;AACA;AACA,2CAA2C,YAAY;AACvD;AACA,6BAA6B;AAC7B;AACA,CAAC;;;;;;;;;;;;ACnGD;AACA;AACA,oBAAoB,mBAAO,CAAC,2HAAoC;AAChE,oBAAoB,mBAAO,CAAC,iHAA+B;AAC3D;AACA,uBAAuB;AACvB;AACA;AACA,kBAAkB,0BAA0B;AAC5C,aAAa,eAAe;AAC5B,gBAAgB;AAChB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,uBAAuB;AACvB;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AC7ID;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,GAAG;AACH;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;ACrCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,YAAY;AACjC,mBAAmB;AACnB,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;AClBD;AACA;AACA;AACA,iBAAiB;AACjB,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;ACpDA;AACA;AACA,oBAAoB,mBAAO,CAAC,iHAA+B;AAC3D;AACA,uBAAuB;AACvB;AACA;AACA,iBAAiB,uBAAuB;AACxC,aAAa,eAAe;AAC5B,wBAAwB;AACxB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAA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","file":"web2vr.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"aframe\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"aframe\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Web2VR\"] = factory(require(\"aframe\"));\n\telse\n\t\troot[\"Web2VR\"] = factory(root[\"aframe\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_aframe__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/web2vr.js\");\n","/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n\tvar _gifsparser = __webpack_require__(1);\n\n\tif (typeof AFRAME === 'undefined') {\n\t  throw 'Component attempted to register before AFRAME was available.';\n\t}\n\n\t/* get util from AFRAME */\n\tvar parseUrl = AFRAME.utils.srcLoader.parseUrl;\n\tvar debug = AFRAME.utils.debug;\n\t// debug.enable('shader:gif:*')\n\n\tdebug.enable('shader:gif:warn');\n\tvar warn = debug('shader:gif:warn');\n\tvar log = debug('shader:gif:debug');\n\n\t/* store data so that you won't load same data */\n\tvar gifData = {};\n\n\t/* create error message */\n\tfunction createError(err, src) {\n\t  return { status: 'error', src: src, message: err, timestamp: Date.now() };\n\t}\n\n\tAFRAME.registerShader('gif', {\n\n\t  /**\n\t   * For material component:\n\t   * @see https://github.com/aframevr/aframe/blob/60d198ef8e2bfbc57a13511ae5fca7b62e01691b/src/components/material.js\n\t   * For example of `registerShader`:\n\t   * @see https://github.com/aframevr/aframe/blob/41a50cd5ac65e462120ecc2e5091f5daefe3bd1e/src/shaders/flat.js\n\t   * For MeshBasicMaterial\n\t   * @see http://threejs.org/docs/#Reference/Materials/MeshBasicMaterial\n\t   */\n\n\t  schema: {\n\n\t    /* For material */\n\t    color: { type: 'color' },\n\t    fog: { default: true },\n\n\t    /* For texuture */\n\t    src: { default: null },\n\t    autoplay: { default: true }\n\n\t  },\n\n\t  /**\n\t   * Initialize material. Called once.\n\t   * @protected\n\t   */\n\t  init: function init(data) {\n\t    log('init', data);\n\t    log(this.el.components);\n\t    this.__cnv = document.createElement('canvas');\n\t    this.__cnv.width = 2;\n\t    this.__cnv.height = 2;\n\t    this.__ctx = this.__cnv.getContext('2d');\n\t    this.__texture = new THREE.Texture(this.__cnv); //renders straight from a canvas\n\t    this.__material = {};\n\t    this.__reset();\n\t    this.material = new THREE.MeshBasicMaterial({ map: this.__texture });\n\t    this.el.sceneEl.addBehavior(this);\n\t    this.__addPublicFunctions();\n\t    return this.material;\n\t  },\n\n\n\t  /**\n\t   * Update or create material.\n\t   * @param {object|null} oldData\n\t   */\n\t  update: function update(oldData) {\n\t    log('update', oldData);\n\t    this.__updateMaterial(oldData);\n\t    this.__updateTexture(oldData);\n\t    return this.material;\n\t  },\n\n\n\t  /**\n\t   * Called on each scene tick.\n\t   * @protected\n\t   */\n\t  tick: function tick(t) {\n\t    if (!this.__frames || this.paused()) return;\n\t    if (Date.now() - this.__startTime >= this.__nextFrameTime) {\n\t      this.nextFrame();\n\t    }\n\t  },\n\n\n\t  /*================================\n\t  =            material            =\n\t  ================================*/\n\n\t  /**\n\t   * Updating existing material.\n\t   * @param {object} data - Material component data.\n\t   */\n\t  __updateMaterial: function __updateMaterial(data) {\n\t    var material = this.material;\n\n\t    var newData = this.__getMaterialData(data);\n\t    Object.keys(newData).forEach(function (key) {\n\t      material[key] = newData[key];\n\t    });\n\t  },\n\n\n\t  /**\n\t   * Builds and normalize material data, normalizing stuff along the way.\n\t   * @param {Object} data - Material data.\n\t   * @return {Object} data - Processed material data.\n\t   */\n\t  __getMaterialData: function __getMaterialData(data) {\n\t    return {\n\t      fog: data.fog,\n\t      color: new THREE.Color(data.color)\n\t    };\n\t  },\n\n\n\t  /*==============================\n\t  =            texure            =\n\t  ==============================*/\n\n\t  /**\n\t   * set texure\n\t   * @private\n\t   * @param {Object} data\n\t   * @property {string} status - success / error\n\t   * @property {string} src - src url\n\t   * @property {array} times - array of time length of each image\n\t   * @property {number} cnt - total counts of gif images\n\t   * @property {array} frames - array of each image\n\t   * @property {Date} timestamp - created at the texure\n\t   */\n\n\t  __setTexure: function __setTexure(data) {\n\t    log('__setTexure', data);\n\t    if (data.status === 'error') {\n\t      warn('Error: ' + data.message + '\\nsrc: ' + data.src);\n\t      this.__reset();\n\t    } else if (data.status === 'success' && data.src !== this.__textureSrc) {\n\t      this.__reset();\n\t      /* Texture added or changed */\n\t      this.__ready(data);\n\t    }\n\t  },\n\n\n\t  /**\n\t   * Update or create texure.\n\t   * @param {Object} data - Material component data.\n\t   */\n\t  __updateTexture: function __updateTexture(data) {\n\t    var src = data.src;\n\t    var autoplay = data.autoplay;\n\n\t    /* autoplay */\n\n\t    if (typeof autoplay === 'boolean') {\n\t      this.__autoplay = autoplay;\n\t    } else if (typeof autoplay === 'undefined') {\n\t      this.__autoplay = true;\n\t    }\n\t    if (this.__autoplay && this.__frames) {\n\t      this.play();\n\t    }\n\n\t    /* src */\n\t    if (src) {\n\t      this.__validateSrc(src, this.__setTexure.bind(this));\n\t    } else {\n\t      /* Texture removed */\n\t      this.__reset();\n\t    }\n\t  },\n\n\n\t  /*=============================================\n\t  =            varidation for texure            =\n\t  =============================================*/\n\n\t  __validateSrc: function __validateSrc(src, cb) {\n\n\t    /* check if src is a url */\n\t    var url = parseUrl(src);\n\t    if (url) {\n\t      this.__getImageSrc(url, cb);\n\t      return;\n\t    }\n\n\t    var message = void 0;\n\n\t    /* check if src is a query selector */\n\t    var el = this.__validateAndGetQuerySelector(src);\n\t    if (!el || (typeof el === 'undefined' ? 'undefined' : _typeof(el)) !== 'object') {\n\t      return;\n\t    }\n\t    if (el.error) {\n\t      message = el.error;\n\t    } else {\n\t      var tagName = el.tagName.toLowerCase();\n\t      if (tagName === 'video') {\n\t        src = el.src;\n\t        message = 'For video, please use `aframe-video-shader`';\n\t      } else if (tagName === 'img') {\n\t        this.__getImageSrc(el.src, cb);\n\t        return;\n\t      } else {\n\t        message = 'For <' + tagName + '> element, please use `aframe-html-shader`';\n\t      }\n\t    }\n\n\t    /* if there is message, create error data */\n\t    if (message) {\n\t      (function () {\n\t        var srcData = gifData[src];\n\t        var errData = createError(message, src);\n\t        /* callbacks */\n\t        if (srcData && srcData.callbacks) {\n\t          srcData.callbacks.forEach(function (cb) {\n\t            return cb(errData);\n\t          });\n\t        } else {\n\t          cb(errData);\n\t        }\n\t        /* overwrite */\n\t        gifData[src] = errData;\n\t      })();\n\t    }\n\t  },\n\n\n\t  /**\n\t   * Validate src is a valid image url\n\t   * @param  {string} src - url that will be tested\n\t   * @param  {function} cb - callback with the test result\n\t   */\n\t  __getImageSrc: function __getImageSrc(src, cb) {\n\t    var _this = this;\n\n\t    /* if src is same as previous, ignore this */\n\t    if (src === this.__textureSrc) {\n\t      return;\n\t    }\n\n\t    /* check if we already get the srcData */\n\t    var srcData = gifData[src];\n\t    if (!srcData || !srcData.callbacks) {\n\t      /* create callback */\n\t      srcData = gifData[src] = { callbacks: [] };\n\t      srcData.callbacks.push(cb);\n\t    } else if (srcData.src) {\n\t      cb(srcData);\n\t      return;\n\t    } else if (srcData.callbacks) {\n\t      /* add callback */\n\t      srcData.callbacks.push(cb);\n\t      return;\n\t    }\n\t    var tester = new Image();\n\t    tester.crossOrigin = 'Anonymous';\n\t    tester.addEventListener('load', function (e) {\n\t      /* check if it is gif */\n\t      _this.__getUnit8Array(src, function (arr) {\n\t        if (!arr) {\n\t          onError('This is not gif. Please use `shader:flat` instead');\n\t          return;\n\t        }\n\t        /* parse data */\n\t        (0, _gifsparser.parseGIF)(arr, function (times, cnt, frames) {\n\t          /* store data */\n\t          var newData = { status: 'success', src: src, times: times, cnt: cnt, frames: frames, timestamp: Date.now() };\n\t          /* callbacks */\n\t          if (srcData.callbacks) {\n\t            srcData.callbacks.forEach(function (cb) {\n\t              return cb(newData);\n\t            });\n\t            /* overwrite */\n\t            gifData[src] = newData;\n\t          }\n\t        }, function (err) {\n\t          return onError(err);\n\t        });\n\t      });\n\t    });\n\t    tester.addEventListener('error', function (e) {\n\t      return onError('Could be the following issue\\n - Not Image\\n - Not Found\\n - Server Error\\n - Cross-Origin Issue');\n\t    });\n\t    function onError(message) {\n\t      /* create error data */\n\t      var errData = createError(message, src);\n\t      /* callbacks */\n\t      if (srcData.callbacks) {\n\t        srcData.callbacks.forEach(function (cb) {\n\t          return cb(errData);\n\t        });\n\t        /* overwrite */\n\t        gifData[src] = errData;\n\t      }\n\t    }\n\t    tester.src = src;\n\t  },\n\n\n\t  /**\n\t   *\n\t   * get mine type\n\t   *\n\t   */\n\t  __getUnit8Array: function __getUnit8Array(src, cb) {\n\t    if (typeof cb !== 'function') {\n\t      return;\n\t    }\n\n\t    var xhr = new XMLHttpRequest();\n\t    xhr.open('GET', src);\n\t    xhr.responseType = 'arraybuffer';\n\t    xhr.addEventListener('load', function (e) {\n\t      var uint8Array = new Uint8Array(e.target.response);\n\t      var arr = uint8Array.subarray(0, 4);\n\t      // const header = arr.map(value => value.toString(16)).join('')\n\t      var header = '';\n\t      for (var i = 0; i < arr.length; i++) {\n\t        header += arr[i].toString(16);\n\t      }\n\t      if (header === '47494638') {\n\t        cb(uint8Array);\n\t      } else {\n\t        cb();\n\t      }\n\t    });\n\t    xhr.addEventListener('error', function (e) {\n\t      log(e);\n\t      cb();\n\t    });\n\t    xhr.send();\n\t  },\n\n\n\t  /**\n\t   * Query and validate a query selector,\n\t   *\n\t   * @param  {string} selector - DOM selector.\n\t   * @return {object} Selected DOM element | error message object.\n\t   */\n\t  __validateAndGetQuerySelector: function __validateAndGetQuerySelector(selector) {\n\t    try {\n\t      var el = document.querySelector(selector);\n\t      if (!el) {\n\t        return { error: 'No element was found matching the selector' };\n\t      }\n\t      return el;\n\t    } catch (e) {\n\t      // Capture exception if it's not a valid selector.\n\t      return { error: 'no valid selector' };\n\t    }\n\t  },\n\n\n\t  /*================================\n\t  =            playback            =\n\t  ================================*/\n\n\t  /**\n\t   * add public functions\n\t   * @private\n\t   */\n\t  __addPublicFunctions: function __addPublicFunctions() {\n\t    this.el.gif = {\n\t      play: this.play.bind(this),\n\t      pause: this.pause.bind(this),\n\t      togglePlayback: this.togglePlayback.bind(this),\n\t      paused: this.paused.bind(this),\n\t      nextFrame: this.nextFrame.bind(this)\n\t    };\n\t  },\n\n\n\t  /**\n\t   * Pause gif\n\t   * @public\n\t   */\n\t  pause: function pause() {\n\t    log('pause');\n\t    this.__paused = true;\n\t  },\n\n\n\t  /**\n\t   * Play gif\n\t   * @public\n\t   */\n\t  play: function play() {\n\t    log('play');\n\t    this.__paused = false;\n\t  },\n\n\n\t  /**\n\t   * Toggle playback. play if paused and pause if played.\n\t   * @public\n\t   */\n\n\t  togglePlayback: function togglePlayback() {\n\n\t    if (this.paused()) {\n\t      this.play();\n\t    } else {\n\t      this.pause();\n\t    }\n\t  },\n\n\n\t  /**\n\t   * Return if the playback is paused.\n\t   * @public\n\t   * @return {boolean}\n\t   */\n\t  paused: function paused() {\n\t    return this.__paused;\n\t  },\n\n\n\t  /**\n\t   * Go to next frame\n\t   * @public\n\t   */\n\t  nextFrame: function nextFrame() {\n\t\tthis.__clearCanvas();\n\t    this.__draw();\n\n\t    /* update next frame time */\n\t    while (Date.now() - this.__startTime >= this.__nextFrameTime) {\n\n\t      this.__nextFrameTime += this.__delayTimes[this.__frameIdx++];\n\t      if ((this.__infinity || this.__loopCnt) && this.__frameCnt <= this.__frameIdx) {\n\t        /* go back to the first */\n\t        this.__frameIdx = 0;\n\t      }\n\t    }\n\t  },\n\n\n\t  /*==============================\n\t   =            canvas            =\n\t   ==============================*/\n\n\t  /**\n\t   * clear canvas\n\t   * @private\n\t   */\n\t  __clearCanvas: function __clearCanvas() {\n\t    this.__ctx.clearRect(0, 0, this.__width, this.__height);\n\t    this.__texture.needsUpdate = true;\n\t  },\n\n\n\t  /**\n\t   * draw\n\t   * @private\n\t   */\n\t  __draw: function __draw() {\n\t    this.__ctx.drawImage(this.__frames[this.__frameIdx], 0, 0, this.__width, this.__height);\n\t    this.__texture.needsUpdate = true;\n\t  },\n\n\n\t  /*============================\n\t  =            ready            =\n\t  ============================*/\n\n\t  /**\n\t   * setup gif animation and play if autoplay is true\n\t   * @private\n\t   * @property {string} src - src url\n\t   * @param {array} times - array of time length of each image\n\t   * @param {number} cnt - total counts of gif images\n\t   * @param {array} frames - array of each image\n\t   */\n\t  __ready: function __ready(_ref) {\n\t    var src = _ref.src;\n\t    var times = _ref.times;\n\t    var cnt = _ref.cnt;\n\t    var frames = _ref.frames;\n\n\t    log('__ready');\n\t    this.__textureSrc = src;\n\t    this.__delayTimes = times;\n\t    cnt ? this.__loopCnt = cnt : this.__infinity = true;\n\t    this.__frames = frames;\n\t    this.__frameCnt = times.length;\n\t    this.__startTime = Date.now();\n\t    this.__width = THREE.Math.floorPowerOfTwo(frames[0].width);\n\t    this.__height = THREE.Math.floorPowerOfTwo(frames[0].height);\n\t    this.__cnv.width = this.__width;\n\t    this.__cnv.height = this.__height;\n\t    this.__draw();\n\t    if (this.__autoplay) {\n\t      this.play();\n\t    } else {\n\t      this.pause();\n\t    }\n\t  },\n\n\n\t  /*=============================\n\t  =            reset            =\n\t  =============================*/\n\n\t  /**\n\t   * @private\n\t   */\n\n\t  __reset: function __reset() {\n\t    this.pause();\n\t    this.__clearCanvas();\n\t    this.__startTime = 0;\n\t    this.__nextFrameTime = 0;\n\t    this.__frameIdx = 0;\n\t    this.__frameCnt = 0;\n\t    this.__delayTimes = null;\n\t    this.__infinity = false;\n\t    this.__loopCnt = 0;\n\t    this.__frames = null;\n\t    this.__textureSrc = null;\n\t  }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\t/**\n\t * \n\t * Gif parser by @gtk2k\n\t * https://github.com/gtk2k/gtk2k.github.io/tree/master/animation_gif\n\t *\n\t */\n\n\texports.parseGIF = function (gif, successCB, errorCB) {\n\n\t  var pos = 0;\n\t  var delayTimes = [];\n\t  var loadCnt = 0;\n\t  var graphicControl = null;\n\t  var imageData = null;\n\t  var frames = [];\n\t  var loopCnt = 0;\n\t  if (gif[0] === 0x47 && gif[1] === 0x49 && gif[2] === 0x46 && // 'GIF'\n\t  gif[3] === 0x38 && gif[4] === 0x39 && gif[5] === 0x61) {\n\t    // '89a'\n\t    pos += 13 + +!!(gif[10] & 0x80) * Math.pow(2, (gif[10] & 0x07) + 1) * 3;\n\t    var gifHeader = gif.subarray(0, pos);\n\t    while (gif[pos] && gif[pos] !== 0x3b) {\n\t      var offset = pos,\n\t          blockId = gif[pos];\n\t      if (blockId === 0x21) {\n\t        var label = gif[++pos];\n\t        if ([0x01, 0xfe, 0xf9, 0xff].indexOf(label) !== -1) {\n\t          label === 0xf9 && delayTimes.push((gif[pos + 3] + (gif[pos + 4] << 8)) * 10);\n\t          label === 0xff && (loopCnt = gif[pos + 15] + (gif[pos + 16] << 8));\n\t          while (gif[++pos]) {\n\t            pos += gif[pos];\n\t          }label === 0xf9 && (graphicControl = gif.subarray(offset, pos + 1));\n\t        } else {\n\t          errorCB && errorCB('parseGIF: unknown label');break;\n\t        }\n\t      } else if (blockId === 0x2c) {\n\t        pos += 9;\n\t        pos += 1 + +!!(gif[pos] & 0x80) * (Math.pow(2, (gif[pos] & 0x07) + 1) * 3);\n\t        while (gif[++pos]) {\n\t          pos += gif[pos];\n\t        }var imageData = gif.subarray(offset, pos + 1);\n\t        frames.push(URL.createObjectURL(new Blob([gifHeader, graphicControl, imageData])));\n\t      } else {\n\t        errorCB && errorCB('parseGIF: unknown blockId');break;\n\t      }\n\t      pos++;\n\t    }\n\t  } else {\n\t    errorCB && errorCB('parseGIF: no GIF89a');\n\t  }\n\t  if (frames.length) {\n\n\t    var cnv = document.createElement('canvas');\n\t    var loadImg = function loadImg() {\n\t      frames.forEach(function (src, i) {\n\t        var img = new Image();\n\t        img.onload = function (e, i) {\n\t          if (i === 0) {\n\t            cnv.width = img.width;\n\t            cnv.height = img.height;\n\t          }\n\t          loadCnt++;\n\t          frames[i] = this;\n\t          if (loadCnt === frames.length) {\n\t            loadCnt = 0;\n\t            imageFix(1);\n\t          }\n\t        }.bind(img, null, i);\n\t        img.src = src;\n\t      });\n\t    };\n\t    var imageFix = function imageFix(i) {\n\t      var img = new Image();\n\t      img.onload = function (e, i) {\n\t        loadCnt++;\n\t        frames[i] = this;\n\t        if (loadCnt === frames.length) {\n\t          cnv = null;\n\t          successCB && successCB(delayTimes, loopCnt, frames);\n\t        } else {\n\t          imageFix(++i);\n\t        }\n\t      }.bind(img);\n\t      img.src = cnv.toDataURL('image/gif');\n\t    };\n\t    loadImg();\n\t  }\n\t};\n\n/***/ }\n/******/ ]);\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/* global AFRAME */\n\nif (typeof AFRAME === 'undefined') {\n  throw new Error('Component attempted to register before AFRAME was available.')\n}\n\nrequire('./systems/super-hands-system.js')\nrequire('./reaction_components/hoverable.js')\nrequire('./reaction_components/grabbable.js')\nrequire('./reaction_components/stretchable.js')\nrequire('./reaction_components/drag-droppable.js')\nrequire('./reaction_components/draggable.js')\nrequire('./reaction_components/droppable.js')\nrequire('./reaction_components/clickable.js')\n\n/**\n * Super Hands component for A-Frame.\n */\nAFRAME.registerComponent('super-hands', {\n  schema: {\n    colliderEvent: {default: 'hit'},\n    colliderEventProperty: {default: 'el'},\n    colliderEndEvent: {default: 'hitend'},\n    colliderEndEventProperty: {default: 'el'},\n    grabStartButtons: {\n      default: ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose',\n        'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown',\n        'pointup', 'thumbup', 'pointingstart', 'pistolstart',\n        'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    grabEndButtons: {\n      default: ['gripup', 'trackpadup', 'triggerup', 'gripopen',\n        'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup',\n        'pointdown', 'thumbdown', 'pointingend', 'pistolend',\n        'thumbstickup', 'mouseup', 'touchend']\n    },\n    stretchStartButtons: {\n      default: ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose',\n        'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown',\n        'pointup', 'thumbup', 'pointingstart', 'pistolstart',\n        'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    stretchEndButtons: {\n      default: ['gripup', 'trackpadup', 'triggerup', 'gripopen',\n        'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup',\n        'pointdown', 'thumbdown', 'pointingend', 'pistolend',\n        'thumbstickup', 'mouseup', 'touchend']\n    },\n    dragDropStartButtons: {\n      default: ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose',\n        'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown',\n        'pointup', 'thumbup', 'pointingstart', 'pistolstart',\n        'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    dragDropEndButtons: {\n      default: ['gripup', 'trackpadup', 'triggerup', 'gripopen',\n        'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup',\n        'pointdown', 'thumbdown', 'pointingend', 'pistolend',\n        'thumbstickup', 'mouseup', 'touchend']\n    },\n    interval: { default: 0 }\n  },\n\n  /**\n   * Set if component needs multiple instancing.\n   */\n  multiple: false,\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function () {\n    // constants\n    this.HOVER_EVENT = 'hover-start'\n    this.UNHOVER_EVENT = 'hover-end'\n    this.GRAB_EVENT = 'grab-start'\n    this.UNGRAB_EVENT = 'grab-end'\n    this.STRETCH_EVENT = 'stretch-start'\n    this.UNSTRETCH_EVENT = 'stretch-end'\n    this.DRAG_EVENT = 'drag-start'\n    this.UNDRAG_EVENT = 'drag-end'\n    this.DRAGOVER_EVENT = 'dragover-start'\n    this.UNDRAGOVER_EVENT = 'dragover-end'\n    this.DRAGDROP_EVENT = 'drag-drop'\n\n    // links to other systems/components\n    this.otherSuperHand = null\n\n    // state tracking - global event handlers (GEH)\n    this.gehDragged = new Set()\n    this.gehClicking = new Set()\n\n    // state tracking - reaction components\n    this.hoverEls = []\n    this.hoverElsIntersections = []\n    this.prevCheckTime = null\n    this.state = new Map()\n    this.dragging = false\n\n    this.unHover = this.unHover.bind(this)\n    this.unWatch = this.unWatch.bind(this)\n    this.onHit = this.onHit.bind(this)\n    this.onGrabStartButton = this.onGrabStartButton.bind(this)\n    this.onGrabEndButton = this.onGrabEndButton.bind(this)\n    this.onStretchStartButton = this.onStretchStartButton.bind(this)\n    this.onStretchEndButton = this.onStretchEndButton.bind(this)\n    this.onDragDropStartButton = this.onDragDropStartButton.bind(this)\n    this.onDragDropEndButton = this.onDragDropEndButton.bind(this)\n    this.system.registerMe(this)\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function (oldData) {\n    this.unRegisterListeners(oldData)\n    this.registerListeners()\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function () {\n    this.system.unregisterMe(this)\n    this.unRegisterListeners()\n    this.hoverEls.length = 0\n    if (this.state.get(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT))\n    }\n    this.onGrabEndButton()\n    this.onStretchEndButton()\n    this.onDragDropEndButton()\n  },\n  tick: (function () {\n    // closer objects and objects with no distance come later in list\n    function sorter (a, b) {\n      const aDist = a.distance == null ? -1 : a.distance\n      const bDist = b.distance == null ? -1 : b.distance\n      if (aDist < bDist) {\n        return 1\n      }\n      if (bDist < aDist) {\n        return -1\n      }\n      return 0\n    }\n    return function (time) {\n      const data = this.data\n      const prevCheckTime = this.prevCheckTime\n      if (prevCheckTime && (time - prevCheckTime < data.interval)) { return }\n      this.prevCheckTime = time\n\n      let orderChanged = false\n      this.hoverElsIntersections.sort(sorter)\n      for (let i = 0; i < this.hoverElsIntersections.length; i++) {\n        if (this.hoverEls[i] !== this.hoverElsIntersections[i].object.el) {\n          orderChanged = true\n          this.hoverEls[i] = this.hoverElsIntersections[i].object.el\n        }\n      }\n      if (orderChanged) {\n        this.hover()\n      }\n    }\n  })(),\n  onGrabStartButton: function (evt) {\n    let carried = this.state.get(this.GRAB_EVENT)\n    this.dispatchMouseEventAll('mousedown', this.el)\n    this.gehClicking = new Set(this.hoverEls)\n    if (!carried) {\n      carried = this.findTarget(this.GRAB_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      })\n      if (carried) {\n        this.state.set(this.GRAB_EVENT, carried)\n        this._unHover(carried)\n      }\n    }\n  },\n  onGrabEndButton: function (evt) {\n    const clickables = this.hoverEls.filter(h => this.gehClicking.has(h))\n    const grabbed = this.state.get(this.GRAB_EVENT)\n    const endEvt = {hand: this.el, buttonEvent: evt}\n    this.dispatchMouseEventAll('mouseup', this.el)\n    for (let i = 0; i < clickables.length; i++) {\n      this.dispatchMouseEvent(clickables[i], 'click', this.el)\n    }\n    this.gehClicking.clear()\n    // check if grabbed entity accepts ungrab event\n    if (grabbed && !this.emitCancelable(grabbed, this.UNGRAB_EVENT, endEvt)) {\n      /* push to top of stack so a drop followed by re-grab gets the same\n         target */\n      this.promoteHoveredEl(this.state.get(this.GRAB_EVENT))\n      this.state.delete(this.GRAB_EVENT)\n      this.hover()\n    }\n  },\n  onStretchStartButton: function (evt) {\n    let stretched = this.state.get(this.STRETCH_EVENT)\n    if (!stretched) {\n      stretched = this.findTarget(this.STRETCH_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      })\n      if (stretched) {\n        this.state.set(this.STRETCH_EVENT, stretched)\n        this._unHover(stretched)\n      }\n    }\n  },\n  onStretchEndButton: function (evt) {\n    const stretched = this.state.get(this.STRETCH_EVENT)\n    const endEvt = {hand: this.el, buttonEvent: evt}\n    // check if end event accepted\n    if (stretched &&\n        !this.emitCancelable(stretched, this.UNSTRETCH_EVENT, endEvt)) {\n      this.promoteHoveredEl(stretched)\n      this.state.delete(this.STRETCH_EVENT)\n      this.hover()\n    }\n  },\n  onDragDropStartButton: function (evt) {\n    let dragged = this.state.get(this.DRAG_EVENT)\n    this.dragging = true\n    if (this.hoverEls.length) {\n      this.gehDragged = new Set(this.hoverEls)\n      this.dispatchMouseEventAll('dragstart', this.el)\n    }\n    if (!dragged) {\n      /* prefer carried so that a drag started after a grab will work\n       with carried element rather than a currently intersected drop target.\n       fall back to queue in case a drag is initiated independent\n       of a grab */\n      if (this.state.get(this.GRAB_EVENT) &&\n          !this.emitCancelable(this.state.get(this.GRAB_EVENT), this.DRAG_EVENT,\n              {hand: this.el, buttonEvent: evt})) {\n        dragged = this.state.get(this.GRAB_EVENT)\n      } else {\n        dragged = this.findTarget(this.DRAG_EVENT, {\n          hand: this.el,\n          buttonEvent: evt\n        })\n      }\n      if (dragged) {\n        this.state.set(this.DRAG_EVENT, dragged)\n        this._unHover(dragged)\n      }\n    }\n  },\n  onDragDropEndButton: function (evt) {\n    const carried = this.state.get(this.DRAG_EVENT)\n    this.dragging = false // keep _unHover() from activating another droptarget\n    this.gehDragged.forEach(carried => {\n      this.dispatchMouseEvent(carried, 'dragend', this.el)\n      // fire event both ways for all intersected targets\n      this.dispatchMouseEventAll('drop', carried, true, true)\n      this.dispatchMouseEventAll('dragleave', carried, true, true)\n    })\n    this.gehDragged.clear()\n    if (carried) {\n      const ddEvt = {\n        hand: this.el,\n        dropped: carried,\n        on: null,\n        buttonEvent: evt\n      }\n      const endEvt = {hand: this.el, buttonEvent: evt}\n      const dropTarget = this.findTarget(this.DRAGDROP_EVENT, ddEvt, true)\n      if (dropTarget) {\n        ddEvt.on = dropTarget\n        this.emitCancelable(carried, this.DRAGDROP_EVENT, ddEvt)\n        this._unHover(dropTarget)\n      }\n      // check if end event accepted\n      if (!this.emitCancelable(carried, this.UNDRAG_EVENT, endEvt)) {\n        this.promoteHoveredEl(carried)\n        this.state.delete(this.DRAG_EVENT)\n        this.hover()\n      }\n    }\n  },\n  processHitEl: function (hitEl, intersection) {\n    const dist = intersection && intersection.distance\n    const sects = this.hoverElsIntersections\n    const hoverEls = this.hoverEls\n    const hitElIndex = this.hoverEls.indexOf(hitEl)\n    let hoverNeedsUpdate = false\n    if (hitElIndex === -1) {\n      hoverNeedsUpdate = true\n      // insert in order of distance when available\n      if (dist != null) {\n        let i = 0\n        while (i < sects.length && dist < sects[i].distance) { i++ }\n        hoverEls.splice(i, 0, hitEl)\n        sects.splice(i, 0, intersection)\n      } else {\n        hoverEls.push(hitEl)\n        sects.push({ object: { el: hitEl } })\n      }\n      this.dispatchMouseEvent(hitEl, 'mouseover', this.el)\n      if (this.dragging && this.gehDragged.size) {\n        // events on targets and on dragged\n        this.gehDragged.forEach(dragged => {\n          this.dispatchMouseEventAll('dragenter', dragged, true, true)\n        })\n      }\n    }\n    return hoverNeedsUpdate\n  },\n  onHit: function (evt) {\n    const hitEl = evt.detail[this.data.colliderEventProperty]\n    let hoverNeedsUpdate = 0\n    if (!hitEl) { return }\n    if (Array.isArray(hitEl)) {\n      for (let i = 0, sect; i < hitEl.length; i++) {\n        sect = evt.detail.intersections && evt.detail.intersections[i]\n        hoverNeedsUpdate += this.processHitEl(hitEl[i], sect)\n      }\n    } else {\n      hoverNeedsUpdate += this.processHitEl(hitEl, null)\n    }\n    if (hoverNeedsUpdate) { this.hover() }\n  },\n  /* search collided entities for target to hover/dragover */\n  hover: function () {\n    var hvrevt, hoverEl\n    // end previous hover\n    if (this.state.has(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT), true)\n    }\n    if (this.state.has(this.DRAGOVER_EVENT)) {\n      this._unHover(this.state.get(this.DRAGOVER_EVENT), true)\n    }\n    if (this.dragging && this.state.get(this.DRAG_EVENT)) {\n      hvrevt = {\n        hand: this.el,\n        hovered: hoverEl,\n        carried: this.state.get(this.DRAG_EVENT)\n      }\n      hoverEl = this.findTarget(this.DRAGOVER_EVENT, hvrevt, true)\n      if (hoverEl) {\n        this.emitCancelable(this.state.get(this.DRAG_EVENT), this.DRAGOVER_EVENT, hvrevt)\n        this.state.set(this.DRAGOVER_EVENT, hoverEl)\n      }\n    }\n    // fallback to hover if not dragging or dragover wasn't successful\n    if (!this.state.has(this.DRAGOVER_EVENT)) {\n      hoverEl = this.findTarget(this.HOVER_EVENT, { hand: this.el }, true)\n      if (hoverEl) {\n        this.state.set(this.HOVER_EVENT, hoverEl)\n      }\n    }\n  },\n  /* called when controller moves out of collision range of entity */\n  unHover: function (evt) {\n    const clearedEls = evt.detail[this.data.colliderEndEventProperty]\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(el => this._unHover(el))\n      } else {\n        this._unHover(clearedEls)\n      }\n    }\n  },\n  /* inner unHover steps needed regardless of cause of unHover */\n  _unHover: function (el, skipNextHover) {\n    let unHovered = false\n    let evt\n    if (el === this.state.get(this.DRAGOVER_EVENT)) {\n      this.state.delete(this.DRAGOVER_EVENT)\n      unHovered = true\n      evt = {\n        hand: this.el,\n        hovered: el,\n        carried: this.state.get(this.DRAG_EVENT)\n      }\n      this.emitCancelable(el, this.UNDRAGOVER_EVENT, evt)\n      if (this.state.has(this.DRAG_EVENT)) {\n        this.emitCancelable(\n          this.state.get(this.DRAG_EVENT),\n          this.UNDRAGOVER_EVENT,\n          evt\n        )\n      }\n    }\n    if (el === this.state.get(this.HOVER_EVENT)) {\n      this.state.delete(this.HOVER_EVENT)\n      unHovered = true\n      this.emitCancelable(el, this.UNHOVER_EVENT, { hand: this.el })\n    }\n    // activate next target, if present\n    if (unHovered && !skipNextHover) {\n      this.hover()\n    }\n  },\n  unWatch: function (evt) {\n    const clearedEls = evt.detail[this.data.colliderEndEventProperty]\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(el => this._unWatch(el))\n      } else {\n        // deprecation path: sphere-collider\n        this._unWatch(clearedEls)\n      }\n    }\n  },\n  _unWatch: function (target) {\n    var hoverIndex = this.hoverEls.indexOf(target)\n    if (hoverIndex !== -1) {\n      this.hoverEls.splice(hoverIndex, 1)\n      this.hoverElsIntersections.splice(hoverIndex, 1)\n    }\n    this.gehDragged.forEach(dragged => {\n      this.dispatchMouseEvent(target, 'dragleave', dragged)\n      this.dispatchMouseEvent(dragged, 'dragleave', target)\n    })\n    this.dispatchMouseEvent(target, 'mouseout', this.el)\n  },\n  registerListeners: function () {\n    this.el.addEventListener(this.data.colliderEvent, this.onHit)\n    this.el.addEventListener(this.data.colliderEndEvent, this.unWatch)\n    this.el.addEventListener(this.data.colliderEndEvent, this.unHover)\n\n    // binding order to keep grabEnd from triggering dragover\n    // again before dragDropEnd can delete its carried state\n    this.data.grabStartButtons.forEach(b => {\n      this.el.addEventListener(b, this.onGrabStartButton)\n    })\n    this.data.stretchStartButtons.forEach(b => {\n      this.el.addEventListener(b, this.onStretchStartButton)\n    })\n    this.data.dragDropStartButtons.forEach(b => {\n      this.el.addEventListener(b, this.onDragDropStartButton)\n    })\n    this.data.dragDropEndButtons.forEach(b => {\n      this.el.addEventListener(b, this.onDragDropEndButton)\n    })\n    this.data.stretchEndButtons.forEach(b => {\n      this.el.addEventListener(b, this.onStretchEndButton)\n    })\n    this.data.grabEndButtons.forEach(b => {\n      this.el.addEventListener(b, this.onGrabEndButton)\n    })\n  },\n  unRegisterListeners: function (data) {\n    data = data || this.data\n    if (Object.keys(data).length === 0) {\n      // Empty object passed on initalization\n      return\n    }\n    this.el.removeEventListener(data.colliderEvent, this.onHit)\n    this.el.removeEventListener(data.colliderEndEvent, this.unHover)\n    this.el.removeEventListener(data.colliderEndEvent, this.unWatch)\n\n    data.grabStartButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onGrabStartButton)\n    })\n    data.grabEndButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onGrabEndButton)\n    })\n    data.stretchStartButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onStretchStartButton)\n    })\n    data.stretchEndButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onStretchEndButton)\n    })\n    data.dragDropStartButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onDragDropStartButton)\n    })\n    data.dragDropEndButtons.forEach(b => {\n      this.el.removeEventListener(b, this.onDragDropEndButton)\n    })\n  },\n  emitCancelable: function (target, name, detail) {\n    var data, evt\n    detail = detail || {}\n    data = { bubbles: true, cancelable: true, detail: detail }\n    data.detail.target = data.detail.target || target\n    evt = new window.CustomEvent(name, data)\n    return target.dispatchEvent(evt)\n  },\n  dispatchMouseEvent: function (target, name, relatedTarget) {\n    var mEvt = new window.MouseEvent(name, { relatedTarget: relatedTarget })\n    target.dispatchEvent(mEvt)\n  },\n  dispatchMouseEventAll: function (name, relatedTarget, filterUsed, alsoReverse) {\n    let els = this.hoverEls\n    if (filterUsed) {\n      els = els\n        .filter(el => el !== this.state.get(this.GRAB_EVENT) &&\n                el !== this.state.get(this.DRAG_EVENT) &&\n                el !== this.state.get(this.STRETCH_EVENT) &&\n                !this.gehDragged.has(el))\n    }\n    if (alsoReverse) {\n      for (let i = 0; i < els.length; i++) {\n        this.dispatchMouseEvent(els[i], name, relatedTarget)\n        this.dispatchMouseEvent(relatedTarget, name, els[i])\n      }\n    } else {\n      for (let i = 0; i < els.length; i++) {\n        this.dispatchMouseEvent(els[i], name, relatedTarget)\n      }\n    }\n  },\n  findTarget: function (evType, detail, filterUsed) {\n    var elIndex\n    var eligibleEls = this.hoverEls\n    if (filterUsed) {\n      eligibleEls = eligibleEls\n        .filter(el => el !== this.state.get(this.GRAB_EVENT) &&\n                el !== this.state.get(this.DRAG_EVENT) &&\n                el !== this.state.get(this.STRETCH_EVENT))\n    }\n    for (elIndex = eligibleEls.length - 1; elIndex >= 0; elIndex--) {\n      if (!this.emitCancelable(eligibleEls[elIndex], evType, detail)) {\n        return eligibleEls[elIndex]\n      }\n    }\n    return null\n  },\n  // Helper to ensure dropping and regrabbing finds the same target for\n  // for order-sorted hoverEls (grabbing; no-op for distance-sorted (pointing)\n  promoteHoveredEl: function (el) {\n    var hoverIndex = this.hoverEls.indexOf(el)\n    if (hoverIndex !== -1 &&\n        this.hoverElsIntersections[hoverIndex].distance == null) {\n      this.hoverEls.splice(hoverIndex, 1)\n      const sect = this.hoverElsIntersections.splice(hoverIndex, 1)\n      this.hoverEls.push(el)\n      this.hoverElsIntersections.push(sect[0])\n    }\n  }\n})\n","/* global AFRAME */\nconst buttonCore = require('./prototypes/buttons-proto.js')\nAFRAME.registerComponent('clickable', AFRAME.utils.extendDeep({}, buttonCore, {\n  schema: {\n    onclick: { type: 'string' }\n  },\n  init: function () {\n    this.CLICKED_STATE = 'clicked'\n    this.CLICK_EVENT = 'grab-start'\n    this.UNCLICK_EVENT = 'grab-end'\n    this.clickers = []\n\n    this.start = this.start.bind(this)\n    this.end = this.end.bind(this)\n    this.el.addEventListener(this.CLICK_EVENT, this.start)\n    this.el.addEventListener(this.UNCLICK_EVENT, this.end)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.CLICK_EVENT, this.start)\n    this.el.removeEventListener(this.UNCLICK_EVENT, this.end)\n  },\n  start: function (evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) { return }\n    this.el.addState(this.CLICKED_STATE)\n    if (this.clickers.indexOf(evt.detail.hand) === -1) {\n      this.clickers.push(evt.detail.hand)\n      if (evt.preventDefault) { evt.preventDefault() }\n    }\n  },\n  end: function (evt) {\n    const handIndex = this.clickers.indexOf(evt.detail.hand)\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) { return }\n    if (handIndex !== -1) {\n      this.clickers.splice(handIndex, 1)\n    }\n    if (this.clickers.length < 1) {\n      this.el.removeState(this.CLICKED_STATE)\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  }\n}))\n","/* global AFRAME */\nconst inherit = AFRAME.utils.extendDeep\nconst buttonCore = require('./prototypes/buttons-proto.js')\n\nAFRAME.registerComponent('drag-droppable', inherit({}, buttonCore, {\n  init: function () {\n    console.warn('Warning: drag-droppable is deprecated. Use draggable and droppable components instead')\n    this.HOVERED_STATE = 'dragover'\n    this.DRAGGED_STATE = 'dragged'\n    this.HOVER_EVENT = 'dragover-start'\n    this.UNHOVER_EVENT = 'dragover-end'\n    this.DRAG_EVENT = 'drag-start'\n    this.UNDRAG_EVENT = 'drag-end'\n    this.DRAGDROP_EVENT = 'drag-drop'\n\n    this.hoverStart = this.hoverStart.bind(this)\n    this.dragStart = this.dragStart.bind(this)\n    this.hoverEnd = this.hoverEnd.bind(this)\n    this.dragEnd = this.dragEnd.bind(this)\n    this.dragDrop = this.dragDrop.bind(this)\n\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStart)\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStart)\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEnd)\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEnd)\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDrop)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStart)\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart)\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEnd)\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd)\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDrop)\n  },\n  hoverStart: function (evt) {\n    this.el.addState(this.HOVERED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  dragStart: function (evt) {\n    if (!this.startButtonOk(evt)) { return }\n    this.el.addState(this.DRAGGED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  hoverEnd: function (evt) {\n    this.el.removeState(this.HOVERED_STATE)\n  },\n  dragEnd: function (evt) {\n    if (!this.endButtonOk(evt)) { return }\n    this.el.removeState(this.DRAGGED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  dragDrop: function (evt) {\n    if (!this.endButtonOk(evt)) { return }\n    if (evt.preventDefault) { evt.preventDefault() }\n  }\n}))\n","/* global AFRAME */\nconst inherit = AFRAME.utils.extendDeep\nconst buttonCore = require('./prototypes/buttons-proto.js')\n\nAFRAME.registerComponent('draggable', inherit({}, buttonCore, {\n  init: function () {\n    this.DRAGGED_STATE = 'dragged'\n    this.DRAG_EVENT = 'drag-start'\n    this.UNDRAG_EVENT = 'drag-end'\n\n    this.dragStartBound = this.dragStart.bind(this)\n    this.dragEndBound = this.dragEnd.bind(this)\n\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStartBound)\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEndBound)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart)\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd)\n  },\n  dragStart: function (evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) { return }\n    this.el.addState(this.DRAGGED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  dragEnd: function (evt) {\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) { return }\n    this.el.removeState(this.DRAGGED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  }\n}))\n","/* global AFRAME */\nfunction elementMatches (el, selector) {\n  if (el.matches) { return el.matches(selector) }\n  if (el.msMatchesSelector) { return el.msMatchesSelector(selector) }\n  if (el.webkitMatchesSelector) { return el.webkitMatchesSelector(selector) }\n}\nAFRAME.registerComponent('droppable', {\n  schema: {\n    accepts: {default: ''},\n    autoUpdate: {default: true},\n    acceptEvent: {default: ''},\n    rejectEvent: {default: ''}\n  },\n  multiple: true,\n  init: function () {\n    this.HOVERED_STATE = 'dragover'\n    this.HOVER_EVENT = 'dragover-start'\n    this.UNHOVER_EVENT = 'dragover-end'\n    this.DRAGDROP_EVENT = 'drag-drop'\n\n    // better for Sinon spying if original method not overwritten\n    this.hoverStartBound = this.hoverStart.bind(this)\n    this.hoverEndBound = this.hoverEnd.bind(this)\n    this.dragDropBound = this.dragDrop.bind(this)\n    this.mutateAcceptsBound = this.mutateAccepts.bind(this)\n\n    this.acceptableEntities = []\n    this.observer = new window.MutationObserver(this.mutateAcceptsBound)\n    this.observerOpts = {childList: true, subtree: true}\n\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStartBound)\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEndBound)\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDropBound)\n  },\n  update: function () {\n    if (this.data.accepts.length) {\n      this.acceptableEntities = Array.prototype.slice.call(\n        this.el.sceneEl.querySelectorAll(this.data.accepts)\n      )\n    } else {\n      this.acceptableEntities = null\n    }\n    if (this.data.autoUpdate && this.acceptableEntities != null) {\n      this.observer.observe(this.el.sceneEl, this.observerOpts)\n    } else {\n      this.observer.disconnect()\n    }\n  },\n  remove: function () {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStartBound)\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEndBound)\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDropBound)\n    this.observer.disconnect()\n  },\n  mutateAccepts: function (mutations) {\n    const query = this.data.accepts\n    mutations.forEach(mutation => {\n      mutation.addedNodes.forEach(added => {\n        if (elementMatches(added, query)) {\n          this.acceptableEntities.push(added)\n        }\n      })\n    })\n  },\n  entityAcceptable: function (entity) {\n    const acceptableEntities = this.acceptableEntities\n    if (acceptableEntities == null) { return true }\n    for (let item of acceptableEntities) {\n      if (item === entity) {\n        return true\n      }\n    }\n    return false\n  },\n  hoverStart: function (evt) {\n    if (evt.defaultPrevented || !this.entityAcceptable(evt.detail.carried)) {\n      return\n    }\n    this.el.addState(this.HOVERED_STATE)\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  hoverEnd: function (evt) {\n    if (evt.defaultPrevented) { return }\n    this.el.removeState(this.HOVERED_STATE)\n  },\n  dragDrop: function (evt) {\n    if (evt.defaultPrevented) { return }\n    const dropped = evt.detail.dropped\n    if (!this.entityAcceptable(dropped)) {\n      if (this.data.rejectEvent.length) {\n        this.el.emit(this.data.rejectEvent, {el: dropped})\n      }\n      return\n    }\n    if (this.data.acceptEvent.length) {\n      this.el.emit(this.data.acceptEvent, {el: dropped})\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  }\n})\n","/* global AFRAME, THREE */\nconst inherit = AFRAME.utils.extendDeep\nconst physicsCore = require('./prototypes/physics-grab-proto.js')\nconst buttonsCore = require('./prototypes/buttons-proto.js')\n// new object with all core modules\nconst base = inherit({}, physicsCore, buttonsCore)\nAFRAME.registerComponent('grabbable', inherit(base, {\n  schema: {\n    maxGrabbers: {type: 'int', default: NaN},\n    invert: {default: false},\n    suppressY: {default: false}\n  },\n  init: function () {\n    this.GRABBED_STATE = 'grabbed'\n    this.GRAB_EVENT = 'grab-start'\n    this.UNGRAB_EVENT = 'grab-end'\n    this.grabbed = false\n    this.grabbers = []\n    this.constraints = new Map()\n    this.deltaPositionIsValid = false\n    this.grabDistance = undefined\n    this.grabDirection = {x: 0, y: 0, z: -1}\n    this.grabOffset = {x: 0, y: 0, z: 0}\n    // persistent object speeds up repeat setAttribute calls\n    this.destPosition = {x: 0, y: 0, z: 0}\n    this.deltaPosition = new THREE.Vector3()\n    this.targetPosition = new THREE.Vector3()\n    this.physicsInit()\n\n    this.el.addEventListener(this.GRAB_EVENT, e => this.start(e))\n    this.el.addEventListener(this.UNGRAB_EVENT, e => this.end(e))\n    this.el.addEventListener('mouseout', e => this.lostGrabber(e))\n  },\n  update: function () {\n    this.physicsUpdate()\n    this.xFactor = (this.data.invert) ? -1 : 1\n    this.zFactor = (this.data.invert) ? -1 : 1\n    this.yFactor = ((this.data.invert) ? -1 : 1) * !this.data.suppressY\n  },\n  tick: (function () {\n    var q = new THREE.Quaternion()\n    var v = new THREE.Vector3()\n\n    return function () {\n      var entityPosition\n      if (this.grabber) {\n        // reflect on z-axis to point in same direction as the laser\n        this.targetPosition.copy(this.grabDirection)\n        this.targetPosition\n            .applyQuaternion(this.grabber.object3D.getWorldQuaternion(q))\n            .setLength(this.grabDistance)\n            .add(this.grabber.object3D.getWorldPosition(v))\n            .add(this.grabOffset)\n        if (this.deltaPositionIsValid) {\n          // relative position changes work better with nested entities\n          this.deltaPosition.sub(this.targetPosition)\n          entityPosition = this.el.getAttribute('position')\n          this.destPosition.x =\n              entityPosition.x - this.deltaPosition.x * this.xFactor\n          this.destPosition.y =\n              entityPosition.y - this.deltaPosition.y * this.yFactor\n          this.destPosition.z =\n              entityPosition.z - this.deltaPosition.z * this.zFactor\n          this.el.setAttribute('position', this.destPosition)\n        } else {\n          this.deltaPositionIsValid = true\n        }\n        this.deltaPosition.copy(this.targetPosition)\n      }\n    }\n  })(),\n  remove: function () {\n    this.el.removeEventListener(this.GRAB_EVENT, this.start)\n    this.el.removeEventListener(this.UNGRAB_EVENT, this.end)\n    this.physicsRemove()\n  },\n  start: function (evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return\n    }\n    // room for more grabbers?\n    const grabAvailable = !Number.isFinite(this.data.maxGrabbers) ||\n        this.grabbers.length < this.data.maxGrabbers\n\n    if (this.grabbers.indexOf(evt.detail.hand) === -1 && grabAvailable) {\n      if (!evt.detail.hand.object3D) {\n        console.warn('grabbable entities must have an object3D')\n        return\n      }\n      this.grabbers.push(evt.detail.hand)\n      // initiate physics if available, otherwise manual\n      if (!this.physicsStart(evt) && !this.grabber) {\n        this.grabber = evt.detail.hand\n        this.resetGrabber()\n      }\n      // notify super-hands that the gesture was accepted\n      if (evt.preventDefault) { evt.preventDefault() }\n      this.grabbed = true\n      this.el.addState(this.GRABBED_STATE)\n    }\n  },\n  end: function (evt) {\n    const handIndex = this.grabbers.indexOf(evt.detail.hand)\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) { return }\n    if (handIndex !== -1) {\n      this.grabbers.splice(handIndex, 1)\n      this.grabber = this.grabbers[0]\n    }\n    this.physicsEnd(evt)\n    if (!this.resetGrabber()) {\n      this.grabbed = false\n      this.el.removeState(this.GRABBED_STATE)\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  resetGrabber: (function () {\n    var objPos = new THREE.Vector3()\n    var grabPos = new THREE.Vector3()\n    return function () {\n      let raycaster\n      if (!this.grabber) {\n        return false\n      }\n      raycaster = this.grabber.getAttribute('raycaster')\n      this.deltaPositionIsValid = false\n      this.grabDistance = this.el.object3D.getWorldPosition(objPos).distanceTo(this.grabber.object3D.getWorldPosition(grabPos))\n      if (raycaster) {\n        this.grabDirection = raycaster.direction\n        this.grabOffset = raycaster.origin\n      }\n      return true\n    }\n  })(),\n  lostGrabber: function (evt) {\n    let i = this.grabbers.indexOf(evt.relatedTarget)\n    // if a queued, non-physics grabber leaves the collision zone, forget it\n    if (i !== -1 && evt.relatedTarget !== this.grabber &&\n        !this.physicsIsConstrained(evt.relatedTarget)) {\n      this.grabbers.splice(i, 1)\n    }\n  }\n}))\n","/* global AFRAME */\nAFRAME.registerComponent('hoverable', {\n  init: function () {\n    this.HOVERED_STATE = 'hovered'\n    this.HOVER_EVENT = 'hover-start'\n    this.UNHOVER_EVENT = 'hover-end'\n\n    this.hoverers = []\n\n    this.start = this.start.bind(this)\n    this.end = this.end.bind(this)\n\n    this.el.addEventListener(this.HOVER_EVENT, this.start)\n    this.el.addEventListener(this.UNHOVER_EVENT, this.end)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.HOVER_EVENT, this.start)\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.end)\n  },\n  start: function (evt) {\n    if (evt.defaultPrevented) { return }\n    this.el.addState(this.HOVERED_STATE)\n    if (this.hoverers.indexOf(evt.detail.hand) === -1) {\n      this.hoverers.push(evt.detail.hand)\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  end: function (evt) {\n    if (evt.defaultPrevented) { return }\n    var handIndex = this.hoverers.indexOf(evt.detail.hand)\n    if (handIndex !== -1) {\n      this.hoverers.splice(handIndex, 1)\n    }\n    if (this.hoverers.length < 1) {\n      this.el.removeState(this.HOVERED_STATE)\n    }\n  }\n})\n","// common code used in customizing reaction components by button\nmodule.exports = (function () {\n  function buttonIsValid (evt, buttonList) {\n    return buttonList.length === 0 ||\n        buttonList.indexOf(evt.detail.buttonEvent.type) !== -1\n  }\n  return {\n    schema: {\n      startButtons: {default: []},\n      endButtons: {default: []}\n    },\n    startButtonOk: function (evt) {\n      return buttonIsValid(evt, this.data['startButtons'])\n    },\n    endButtonOk: function (evt) {\n      return buttonIsValid(evt, this.data['endButtons'])\n    }\n  }\n})()\n","// base code used by grabbable for physics interactions\nmodule.exports = {\n  schema: {\n    usePhysics: {default: 'ifavailable'}\n  },\n  physicsInit: function () {\n    this.constraints = new Map()\n  },\n  physicsUpdate: function () {\n    if (this.data.usePhysics === 'never' && this.constraints.size) {\n      this.physicsClear()\n    }\n  },\n  physicsRemove: function () {\n    this.physicsClear()\n  },\n  physicsStart: function (evt) {\n    // initiate physics constraint if available and not already existing\n    if (this.data.usePhysics !== 'never' && this.el.body &&\n        evt.detail.hand.body && !this.constraints.has(evt.detail.hand)) {\n      const newConId = Math.random().toString(36).substr(2, 9)\n      this.el.setAttribute('constraint__' + newConId, {\n        target: evt.detail.hand\n      })\n      this.constraints.set(evt.detail.hand, newConId)\n      return true\n    }\n    // Prevent manual grab by returning true\n    if (this.data.usePhysics === 'only') { return true }\n    return false\n  },\n  physicsEnd: function (evt) {\n    let constraintId = this.constraints.get(evt.detail.hand)\n    if (constraintId) {\n      this.el.removeAttribute('constraint__' + constraintId)\n      this.constraints.delete(evt.detail.hand)\n    }\n  },\n  physicsClear: function () {\n    if (this.el.body) {\n      for (let c of this.constraints.values()) {\n        this.el.body.world.removeConstraint(c)\n      }\n    }\n    this.constraints.clear()\n  },\n  physicsIsConstrained: function (el) {\n    return this.constraints.has(el)\n  },\n  physicsIsGrabbing () {\n    return this.constraints.size > 0\n  }\n}\n","/* global AFRAME, THREE */\nconst inherit = AFRAME.utils.extendDeep\nconst buttonsCore = require('./prototypes/buttons-proto.js')\n// new object with all core modules\nconst base = inherit({}, buttonsCore)\nAFRAME.registerComponent('stretchable', inherit(base, {\n  schema: {\n    usePhysics: {default: 'ifavailable'},\n    invert: {default: false},\n    physicsUpdateRate: {default: 100}\n  },\n  init: function () {\n    this.STRETCHED_STATE = 'stretched'\n    this.STRETCH_EVENT = 'stretch-start'\n    this.UNSTRETCH_EVENT = 'stretch-end'\n    this.stretched = false\n    this.stretchers = []\n\n    this.scale = new THREE.Vector3()\n    this.handPos = new THREE.Vector3()\n    this.otherHandPos = new THREE.Vector3()\n\n    this.start = this.start.bind(this)\n    this.end = this.end.bind(this)\n\n    this.el.addEventListener(this.STRETCH_EVENT, this.start)\n    this.el.addEventListener(this.UNSTRETCH_EVENT, this.end)\n  },\n  update: function (oldDat) {\n    this.updateBodies = AFRAME.utils.throttleTick(\n      this._updateBodies,\n      this.data.physicsUpdateRate,\n      this\n    )\n  },\n  tick: function (time, timeDelta) {\n    if (!this.stretched) { return }\n    this.scale.copy(this.el.getAttribute('scale'))\n    this.stretchers[0].object3D.getWorldPosition(this.handPos)\n    this.stretchers[1].object3D.getWorldPosition(this.otherHandPos)\n    const currentStretch = this.handPos.distanceTo(this.otherHandPos)\n    let deltaStretch = 1\n    if (this.previousStretch !== null && currentStretch !== 0) {\n      deltaStretch = Math.pow(\n          currentStretch / this.previousStretch,\n          (this.data.invert)\n            ? -1\n            : 1\n      )\n    }\n    this.previousStretch = currentStretch\n    if (this.previousPhysicsStretch == null) {\n      // establish correct baseline even if throttled function isn't called\n      this.previousPhysicsStretch = currentStretch\n    }\n    this.scale.multiplyScalar(deltaStretch)\n    this.el.setAttribute('scale', this.scale)\n    // scale update for all nested physics bodies (throttled)\n    this.updateBodies(time, timeDelta)\n  },\n  remove: function () {\n    this.el.removeEventListener(this.STRETCH_EVENT, this.start)\n    this.el.removeEventListener(this.UNSTRETCH_EVENT, this.end)\n  },\n  start: function (evt) {\n    if (this.stretched || this.stretchers.includes(evt.detail.hand) ||\n        !this.startButtonOk(evt) || evt.defaultPrevented) {\n      return\n    } // already stretched or already captured this hand or wrong button\n    this.stretchers.push(evt.detail.hand)\n    if (this.stretchers.length === 2) {\n      this.stretched = true\n      this.previousStretch = null\n      this.previousPhysicsStretch = null\n      this.el.addState(this.STRETCHED_STATE)\n    }\n    if (evt.preventDefault) { evt.preventDefault() } // gesture accepted\n  },\n  end: function (evt) {\n    var stretcherIndex = this.stretchers.indexOf(evt.detail.hand)\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) { return }\n    if (stretcherIndex !== -1) {\n      this.stretchers.splice(stretcherIndex, 1)\n      this.stretched = false\n      this.el.removeState(this.STRETCHED_STATE)\n      // override throttle to push last stretch to physics bodies\n      this._updateBodies()\n    }\n    if (evt.preventDefault) { evt.preventDefault() }\n  },\n  _updateBodies: function () {\n    if (!this.el.body || this.data.usePhysics === 'never') { return }\n    const currentStretch = this.previousStretch // last visible geometry stretch\n    let deltaStretch = 1\n    if (this.previousPhysicsStretch !== null && currentStretch > 0) {\n      deltaStretch = Math.pow(\n          currentStretch / this.previousPhysicsStretch,\n          (this.data.invert)\n            ? -1\n            : 1\n      )\n    }\n    this.previousPhysicsStretch = currentStretch\n    if (deltaStretch === 1) { return }\n    for (let c of this.el.childNodes) { this.stretchBody(c, deltaStretch) }\n    this.stretchBody(this.el, deltaStretch)\n  },\n  stretchBody: function (el, deltaStretch) {\n    if (!el.body) { return }\n    let physicsShape\n    let offset\n    for (let i = 0; i < el.body.shapes.length; i++) {\n      physicsShape = el.body.shapes[i]\n      if (physicsShape.halfExtents) {\n        physicsShape.halfExtents\n            .scale(deltaStretch, physicsShape.halfExtents)\n        physicsShape.updateConvexPolyhedronRepresentation()\n      } else if (physicsShape.radius) {\n        physicsShape.radius *= deltaStretch\n        physicsShape.updateBoundingSphereRadius()\n      } else if (!this.shapeWarned) {\n        console.warn('Unable to stretch physics body: unsupported shape')\n        this.shapeWarned = true\n      }\n      // also move offset to match scale change\n      offset = el.body.shapeOffsets[i]\n      offset.scale(deltaStretch, offset)\n    }\n    el.body.updateBoundingRadius()\n  }\n}))\n","/* global AFRAME */\nAFRAME.registerSystem('super-hands', {\n  init: function () {\n    this.superHands = []\n  },\n  registerMe: function (comp) {\n    // when second hand registers, store links\n    if (this.superHands.length === 1) {\n      this.superHands[0].otherSuperHand = comp\n      comp.otherSuperHand = this.superHands[0]\n    }\n    this.superHands.push(comp)\n  },\n  unregisterMe: function (comp) {\n    var index = this.superHands.indexOf(comp)\n    if (index !== -1) {\n      this.superHands.splice(index, 1)\n    }\n    this.superHands.forEach(x => {\n      if (x.otherSuperHand === comp) { x.otherSuperHand = null }\n    })\n  }\n})\n","import AssetManager from \"./assetManager\";\r\nimport \"./components/renderer\";\r\n\r\nexport default class AframeContext {\r\n    constructor(settings) {\r\n        this.inVR = false;\r\n        // settings pointer\r\n        this.settings = settings;\r\n        this.createScene();\r\n        // create asset manager\r\n        this.assetManager = new AssetManager(this.scene);\r\n    }\r\n\r\n    createScene() {\r\n        // find scene if exists else create scene\r\n        const scene = document.getElementsByTagName(\"a-scene\");\r\n        if (scene.length > 0)\r\n            this.scene = scene[0];\r\n        else {\r\n            this.scene = document.createElement(\"a-scene\");\r\n            document.body.appendChild(this.scene);\r\n            this.newScene = true;\r\n        }\r\n\r\n        // add stats to scene if debug\r\n        if (this.settings.debug)\r\n            this.scene.setAttribute(\"stats\", \"\")\r\n\r\n        //custom renderer params like local clipping\r\n        this.scene.setAttribute(\"vr-renderer\", \"\");\r\n\r\n        // check if in VR\r\n        this.scene.addEventListener(\"enter-vr\", (() => {\r\n            this.inVR = true;\r\n        }).bind(this));\r\n        this.scene.addEventListener(\"exit-vr\", (() => {\r\n            this.inVR = false;\r\n        }).bind(this));\r\n    }\r\n\r\n    createContainer(web2vr) {\r\n        // conttainer for all aframe elements\r\n        this.container = document.createElement(\"a-entity\");\r\n        this.container.classList.add(\"vr-container\");\r\n        this.container.classList.add(this.settings.interactiveTag);\r\n\r\n        // position container\r\n        const width = parseFloat(window.getComputedStyle(web2vr.container).width) * (1 / this.settings.scale);\r\n        let x = this.settings.position.x;\r\n        // if x=0 then then we want to be in center for testing and showcase\r\n        if (x == 0)\r\n            x = x - width / 2;\r\n        this.container.object3D.position.set(x, this.settings.position.y, this.settings.position.z);\r\n        // update rotation from aframe(1.0.4) because there is bug(rotation x will be wrong) if you update with three.js\r\n        this.container.setAttribute(\"rotation\", { x: this.settings.rotation.x, y: this.settings.rotation.y, z: this.settings.rotation.z });\r\n\r\n        const parentElement = document.querySelector(this.settings.parentSelector);\r\n        if (parentElement)\r\n            parentElement.appendChild(this.container);\r\n        else {\r\n            this.container.setAttribute(\"vr-grab-rotate-static\", \"\");\r\n            this.container.setAttribute(\"grabbable\", \"\");\r\n            this.container.setAttribute(\"stretchable\", \"\");\r\n            this.scene.appendChild(this.container);\r\n        }\r\n\r\n        // pointer for grabRotateStatic\r\n        this.container.web2vr = web2vr;\r\n    }\r\n\r\n    createSky() {\r\n        // create sky if sky doesnt exist\r\n        if (document.getElementsByTagName(\"a-sky\").length == 0 && this.settings.skybox) {\r\n            this.sky = document.createElement(\"a-sky\");\r\n            this.sky.setAttribute(\"color\", \"#a9f8fe\");\r\n            this.scene.appendChild(this.sky);\r\n        }\r\n    }\r\n\r\n    createControllers() {\r\n        // cursor only for dev testing on desktop\r\n        if (!document.getElementById(\"mouseCursor\")) {\r\n            const cursor = document.createElement(\"a-entity\");\r\n            cursor.id = \"mouseCursor\";\r\n            cursor.setAttribute(\"cursor\", \"rayOrigin\", \"mouse\");\r\n            cursor.setAttribute(\"raycaster\", `objects: .${this.settings.interactiveTag}, .collidable`);\r\n            this.scene.appendChild(cursor);\r\n        }\r\n\r\n        // super hands 6DOF\r\n        if (this.settings.createControllers && !document.getElementById(\"leftHand\")) {\r\n            const raycaster = `objects: .${this.settings.interactiveTag}, .collidable; far: ${this.settings.raycasterFar}`;\r\n            const superhands = \"colliderEvent: raycaster-intersection; colliderEventProperty: els; colliderEndEvent:raycaster-intersection-cleared; colliderEndEventProperty: clearedEls; grabStartButtons: gripdown; grabEndButtons: gripup; stretchStartButtons: gripdown; stretchEndButtons: gripup\";\r\n\r\n            const leftHand = document.createElement(\"a-entity\");\r\n            leftHand.id = \"leftHand\";\r\n            leftHand.setAttribute(\"hand-controls\", \"hand:left; handModelStyle: highPoly; color: #ffcccc\");\r\n            leftHand.setAttribute(\"laser-controls\", \"\");\r\n            leftHand.setAttribute(\"raycaster\", raycaster);\r\n            leftHand.setAttribute(\"super-hands\", superhands);\r\n\r\n            const rightHand = document.createElement(\"a-entity\");\r\n            rightHand.id = \"rightHand\";\r\n            rightHand.setAttribute(\"hand-controls\", \"hand:right; handModelStyle: highPoly; color: #ffcccc\");\r\n            rightHand.setAttribute(\"laser-controls\", \"\");\r\n            rightHand.setAttribute(\"raycaster\", raycaster);\r\n            rightHand.setAttribute(\"super-hands\", superhands);\r\n\r\n            this.scene.appendChild(leftHand);\r\n            this.scene.appendChild(rightHand);\r\n        }\r\n        // keyboard\r\n        /*this.keyboard = document.getElementById(\"vr-keyboard\");\r\n        if (!this.keyboard) {\r\n            this.keyboard = document.createElement(\"a-entity\");\r\n            this.keyboard.id = \"vr-keyboard\";\r\n            this.keyboard.setAttribute(\"a-keyboard\", \"\");\r\n            this.keyboard.setAttribute(\"grabbable\", \"\");\r\n            this.scene.appendChild(this.keyboard);\r\n            this.keyboard.object3D.visible = false;\r\n\r\n            // current active input\r\n            this.keyboard.activeInput = null;\r\n            // event listener for the keyboard key press \r\n            document.addEventListener('a-keyboard-update', (e) => {\r\n                if (this.keyboard.activeInput) {\r\n                    const code = parseInt(e.detail.code);\r\n                    let value = this.keyboard.activeInput.value;\r\n\r\n                    // backspace\r\n                    if (code == 8)\r\n                        value = value.slice(0, -1);\r\n                    // submit or cancel\r\n                    else if (code == 6 || code == 24) {\r\n                        this.keyboard.object3D.visible = false;\r\n                        this.keyboard.object3D.position.y = 10000; // because raycasting still collides with invisible objects\r\n                        this.keyboard.activeInput.element.active = false;\r\n                        this.keyboard.activeInput.element.update();\r\n                        this.keyboard.activeInput = null;\r\n                        return;\r\n                    }\r\n                    else\r\n                        value += e.detail.value;\r\n\r\n                    this.keyboard.activeInput.value = value;\r\n                    this.keyboard.activeInput.element.update();\r\n                }\r\n            });\r\n        }*/\r\n    }\r\n}","export default class AssetManager {\r\n    constructor(scene) {\r\n        const assets = document.getElementsByTagName(\"a-assets\")[0];\r\n        if (assets)\r\n            this.assets = assets;\r\n        else {\r\n            this.assets = document.createElement(\"a-assets\");\r\n            scene.appendChild(this.assets);\r\n        }\r\n    }\r\n\r\n    // update current-id attribute\r\n    updateCurrentAssetId() {\r\n        let currentAssetId = parseInt(this.assets.getAttribute(\"current-id\"));\r\n        if (!this.assets.getAttribute(\"current-id\")) {\r\n            this.assets.setAttribute(\"current-id\", 0);\r\n            currentAssetId = 0;\r\n        }\r\n        this.assets.setAttribute(\"current-id\", currentAssetId + 1);\r\n    }\r\n\r\n    // find asset if exists if not create and return it\r\n    getAsset(path, type) {\r\n        const assets = this.assets.getChildren();\r\n\r\n        for (const asset of assets) {\r\n            if (asset.getAttribute(\"src\") === path)\r\n                return asset.getAttribute(\"id\");\r\n        }\r\n\r\n        return this.createAsset(path, type);\r\n    }\r\n\r\n    createAsset(path, type) {\r\n        const asset = document.createElement(type);\r\n        asset.setAttribute(\"src\", path);\r\n        this.updateCurrentAssetId();\r\n        const id = \"asset-\" + this.assets.getAttribute(\"current-id\");\r\n        asset.setAttribute(\"id\", id);\r\n        // have to manualy add crossorigin for all external assets to load\r\n        asset.setAttribute(\"crossorigin\", \"Anonymous\");\r\n\r\n        this.assets.appendChild(asset);\r\n        return id;\r\n    }\r\n\r\n    removeAsset(id) {\r\n        this.assets.querySelector(\"#\" + id).remove();\r\n    }\r\n}","AFRAME.registerComponent(\"vr-animate\", {\r\n    init: function () {\r\n        this.running = false;\r\n        // listenes for css animation and translation\r\n        this.el.element.domElement.addEventListener(\"animationstart\", this.startAnimation.bind(this));\r\n        this.el.element.domElement.addEventListener(\"animationend\", this.stopAnimation.bind(this));\r\n        this.el.element.domElement.addEventListener(\"transitionstart\", this.startAnimation.bind(this));\r\n        this.el.element.domElement.addEventListener(\"transitionend\", this.stopAnimation.bind(this));\r\n    },\r\n    tick: function () {\r\n        if (this.running)\r\n            this.el.element.web2vr.update();\r\n    },\r\n    startAnimation: function () {\r\n        this.running = true;\r\n    },\r\n    stopAnimation: function () {\r\n        this.running = false;\r\n        // one final update\r\n        this.el.element.web2vr.update();\r\n    }\r\n});","AFRAME.registerComponent(\"vr-border\", {\r\n    schema: {\r\n        width: { type: \"int\" },\r\n        color: { type: \"string\" },\r\n    },\r\n    init: function () {\r\n        this.running = true;\r\n        const plane = this.el.object3D.children[0];\r\n        const edges = new THREE.EdgesGeometry(plane.geometry);\r\n        const line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0x000000, linewidth: 10 }));\r\n\r\n        this.borderObject = line;\r\n        this.el.element.web2vr.aframe.container.object3D.add(this.borderObject);\r\n\r\n        //maybe clippingContext inside tick?\r\n        if (this.el.element.clippingContext) {\r\n            line.material.clippingPlanes = this.el.element.clippingContext.planes;\r\n            line.material.needsUpdate = true;\r\n        }\r\n    },\r\n    update: function () {\r\n        // waiting for three.js(WebGL) to add lineWidth support for not all lineWidth is 1\r\n        const borderWidth = this.data.width;\r\n\r\n        // custom element border width\r\n        if (this.el.element.borderWidth)\r\n            this.borderObject.material.lineWidth = this.el.element.borderWidth;\r\n        else\r\n            this.borderObject.material.lineWidth = borderWidth;\r\n\r\n        // custom element border color\r\n        if (this.el.element.borderColor)\r\n            this.borderObject.material.color = this.el.element.borderColor;\r\n        else\r\n            this.borderObject.material.color = new THREE.Color(this.data.color);\r\n    },\r\n    updateBorder: function () {\r\n        if (this.el.element.visible) {\r\n            this.running = true;\r\n            this.borderObject.material.visible = true;\r\n        }\r\n        else\r\n            this.borderObject.material.visible = false;\r\n    },\r\n    tick: function () {\r\n        if (this.running) {\r\n            const scale = this.el.object3D.scale;\r\n            const plane = this.el.object3D.children[0].geometry.clone();\r\n            plane.scale(scale.x, scale.y, scale.z);\r\n            const edges = new THREE.EdgesGeometry(plane);\r\n            const position = this.el.object3D.position;\r\n\r\n            this.borderObject.geometry = edges;\r\n\r\n            this.borderObject.position.set(position.x, position.y, position.z + this.el.element.web2vr.settings.layerStep * 2);\r\n            this.running = false;\r\n        }\r\n    },\r\n    remove: function () {\r\n        this.el.element.web2vr.aframe.container.object3D.remove(this.borderObject);\r\n    }\r\n});","AFRAME.registerComponent(\"vr-grab-rotate-static\", {\r\n    tick: function () {\r\n        if (this.el.components[\"grabbable\"].grabbed) {\r\n            // update clipping when moving\r\n            if (this.el.web2vr.scroll.hasScroll) {\r\n                for (const element of this.el.web2vr.elements)\r\n                    element.updateClipping();\r\n            }\r\n\r\n            const obj = this.el.object3D;\r\n            const hand = this.el.components[\"grabbable\"].grabbers[0].object3D;\r\n\r\n            obj.rotation.y = Math.atan2(hand.position.x - (obj.position.x + this.el.children[0].getAttribute(\"width\") / 2), hand.position.z - obj.position.z);\r\n\r\n            //obj.rotation.x = hand.rotation.x;\r\n            //obj.rotation.y = hand.rotation.y;\r\n            //obj.rotation.z = hand.rotation.z;\r\n        }\r\n    },\r\n});","AFRAME.registerComponent(\"vr-renderer\", {\r\n    init: function () {\r\n        this.el.sceneEl.renderer.localClippingEnabled = true;\r\n    }\r\n});","AFRAME.registerComponent(\"vr-scrollbar\", {\r\n    init: function () {\r\n        this.el.addEventListener(\"click\", (function (evt) {\r\n            let scrollHeight = parseFloat(this.el.web2vr.aframe.container.firstElementChild.element.style.height) - this.el.web2vr.settings.scrollWindowHeight;\r\n            if (this.el.web2vr.scroll.scrollContainer == this.el.web2vr.container)\r\n                scrollHeight = this.el.web2vr.scroll.scrollContainer.scrollHeight - this.el.web2vr.scroll.scrollContainer.clientHeight;\r\n\r\n            const scrollY = (1 - evt.detail.intersection.uv.y) * (scrollHeight) / this.el.web2vr.settings.scale;\r\n            const elements = [...this.el.web2vr.elements];\r\n            // remove first element that is the backgorund of container\r\n            elements.shift();\r\n\r\n            this.el.pointer.object3D.position.setY(this.pointEndY + evt.detail.intersection.uv.y * (this.pointStartY - this.pointEndY));\r\n\r\n            for (const element of elements) {\r\n                element.position.scrollY = scrollY;\r\n            }\r\n            this.el.web2vr.update();\r\n        }).bind(this));\r\n    },\r\n    play: function () {\r\n        const width = parseFloat(this.el.web2vr.aframe.container.firstElementChild.getAttribute(\"width\"));\r\n        const height = parseFloat(this.el.web2vr.aframe.container.firstElementChild.getAttribute(\"height\"));\r\n\r\n        // init plane size\r\n        this.el.setAttribute(\"width\", width / 20);\r\n        this.el.setAttribute(\"height\", height);\r\n\r\n        //init scrollbar position\r\n        this.el.scrollbar.object3D.position.setX(width + parseFloat(this.el.getAttribute(\"width\") / 2));\r\n        this.el.scrollbar.object3D.position.setY(0 - height / 2); //1.96\r\n        this.el.scrollbar.object3D.position.setZ(-(this.el.web2vr.settings.layerStep*4));\r\n\r\n        // init pointer position and size\r\n        this.el.pointer.setAttribute(\"height\", width / 20);\r\n        this.el.pointer.setAttribute(\"width\", width / 20);\r\n\r\n        this.pointStartY = height / 2 - parseFloat(this.el.pointer.getAttribute(\"height\")) / 2;\r\n        this.pointEndY = this.pointStartY - height + parseFloat(this.el.pointer.getAttribute(\"height\"));\r\n\r\n        this.el.pointer.object3D.position.setY(this.pointStartY);\r\n        this.el.pointer.object3D.position.setZ(this.el.web2vr.settings.layerStep*2);\r\n    }\r\n\r\n});","import TextElement from \"./textElement\";\r\n\r\nexport default class ButtomElement extends TextElement {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        this.borderColor = new THREE.Color(0x000000);\r\n        this.borderWidth = 1;\r\n    }\r\n\r\n    updateTextPadding() {\r\n        // ignore padding for buttons\r\n    }\r\n\r\n    updateText() {\r\n        if (this.domElement.tagName == \"INPUT\")\r\n            this.textValue = this.domElement.value.replace(/\\s{2,}/g, ' ');\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class CanvasElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n\r\n        this.imageId = null;\r\n        this.entity = document.createElement(\"a-image\");\r\n    }\r\n\r\n    updateImage(src) {\r\n        const assetId = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\r\n\r\n        // remove old image if there is new image\r\n        if (this.imageId && this.imageId != assetId)\r\n            this.web2vr.aframe.assetManager.removeAsset(this.imageId);\r\n\r\n        this.entity.setAttribute(\"id\", \"IMAGE_\" + assetId);\r\n        this.entity.setAttribute(\"src\", \"#\" + assetId);\r\n        this.imageId = assetId;\r\n    }\r\n\r\n    specificUpdate() {\r\n        this.updateImage(this.domElement.toDataURL());\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class CheckBoxElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        this.borderColor = new THREE.Color(0x000000);\r\n        this.borderWidth = 1;\r\n        this.entity = document.createElement(\"a-plane\");\r\n        this.domElement.addEventListener(\"click\", (() => {\r\n            this.specificUpdate();\r\n        }).bind(this))\r\n    }\r\n\r\n    specificUpdate() {\r\n        if (this.domElement.checked)\r\n            this.entity.setAttribute(\"color\", \"#0075FF\");\r\n        else\r\n            this.entity.setAttribute(\"color\", \"#FFFFFF\");\r\n    }\r\n}","import Element from \"./element\";\r\nimport Helper from \"../utils/helper\";\r\n\r\nexport default class ContainerElement extends Element {\r\n    constructor(web2vr, domElement, layer, textOnly = false) {\r\n        super(web2vr, domElement, layer);\r\n        this.textOnly = textOnly;\r\n        this.entity = document.createElement(\"a-plane\");\r\n\r\n        // if hyperlink trigger a click event\r\n        if (this.domElement.tagName == \"A\") {\r\n            this.entity.addEventListener(\"click\", () => { console.log(\"Link clicked!\", this.domElement.click()); });\r\n        }\r\n\r\n        if (!this.textOnly) {\r\n            // show back plane for the main container\r\n            if (this.domElement == this.web2vr.container)\r\n                this.entity.setAttribute(\"material\", \"side\", \"double\");\r\n\r\n            // only needed for experimental background\r\n            this.expImageId = null;\r\n            this.oldBackgroundImage = null;\r\n            this.oldDomPosition = null;\r\n        }\r\n    }\r\n\r\n    specificUpdate() {\r\n        if (!this.textOnly) {\r\n            const backgroundColor = this.style.backgroundColor;\r\n            let backgroundImage = this.style.backgroundImage; // to get 1:1 as html have to use background-size: cover; or use experimental\r\n\r\n            if (backgroundImage != \"none\") {\r\n                // cannot use animations that require update to be called every frame. html2canvas is very performance heavy.\r\n                if (this.web2vr.settings.experimental) {\r\n                    if ((backgroundImage != this.oldBackgroundImage || (this.oldDomPosition && !this.position.equalsDOMPosition(this.oldDomPosition)))) {\r\n                        let id = this.domElement.id;\r\n                        let customId = false;\r\n                        if (!id) {\r\n                            customId = true;\r\n                            id = \"html2canvas-\" + this.web2vr.html2canvasIDcounter++;\r\n                            this.domElement.id = id;\r\n                        }\r\n\r\n                        html2canvas(this.domElement, {\r\n                            onclone: (clone) => {\r\n                                const style = document.createElement('style');\r\n\r\n                                clone.head.appendChild(style);\r\n                                // ignoring opacity because we use opacity from aframe\r\n                                style.sheet.insertRule(`\r\n                    #${id} {\r\n                        opacity: 1;\r\n                    }`);\r\n                                // hide the text\r\n                                style.sheet.insertRule(`\r\n                    #${id} {\r\n                        color: transparent;\r\n                    }`);\r\n                                // hide the children elements\r\n                                style.sheet.insertRule(`\r\n                    #${id} > * {\r\n                        display:none\r\n                    }`);\r\n                                // vr-span has to be block so it can render properly\r\n                                style.sheet.insertRule(`\r\n                    #${id} > .vr-span {\r\n                        display:block\r\n                    }`);\r\n                                if (customId)\r\n                                    this.domElement.removeAttribute(\"id\");\r\n                            }\r\n                        }).then(canvas => {\r\n                            if (this.expImageId)\r\n                                this.web2vr.aframe.assetManager.removeAsset(this.expImageId);\r\n                            this.expImageId = this.web2vr.aframe.assetManager.getAsset(canvas.toDataURL(), \"img\");\r\n                            this.entity.setAttribute(\"material\", \"src: #\" + this.expImageId);\r\n                        });\r\n                        this.oldBackgroundImage = backgroundImage;\r\n                    }\r\n                }\r\n                else if (Helper.isUrl(backgroundImage)) {\r\n                    // remove url(\"\")\r\n                    backgroundImage = backgroundImage.substring(backgroundImage.lastIndexOf('(\\\"') + 2, backgroundImage.lastIndexOf('\\\")'));\r\n                    this.entity.setAttribute(\"material\", \"src: #\" + this.web2vr.aframe.assetManager.getAsset(backgroundImage, \"img\"));\r\n                    // transparent images support\r\n                    this.entity.setAttribute(\"material\", \"transparent\", true);\r\n                }\r\n            }\r\n            else {\r\n                // if there is no backgroundColor dont renders\r\n                if (backgroundColor == \"rgba(0, 0, 0, 0)\") {\r\n                    this.entity.setAttribute(\"material\", \"visible\", false);\r\n                }\r\n                else {\r\n                    this.entity.setAttribute(\"material\", \"visible\", true);\r\n                    this.entity.setAttribute(\"color\", backgroundColor);\r\n                    this.updateOpacity();\r\n                }\r\n            }\r\n            this.oldDomPosition = this.position.domPosition;\r\n        }\r\n    }\r\n\r\n    updateOpacity() {\r\n        const alpha = parseFloat(this.style.backgroundColor.split(',')[3]);\r\n        // calculate final alpha channel result\r\n        if (alpha) {\r\n            let a = alpha;\r\n            let b = this.style.opacity;\r\n            if (a < b) {\r\n                b = alpha;\r\n                a = this.style.opacity;\r\n            }\r\n            this.entity.setAttribute(\"opacity\", a - (a - b));\r\n        }\r\n    }\r\n}","import Position from \"../utils/position\";\r\nimport MouseEventHandler from \"../utils/mouseEventHandler\";\r\n\r\nexport default class Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        this.web2vr = web2vr;\r\n        this.domElement = domElement;\r\n        this.layer = layer;\r\n        this.domElement.element = this; // so we can do domeElement.parentNode.element\r\n        this.childElements = new Set();\r\n\r\n        this.entity = null; // aframe entity this null becasue Element class is abstract\r\n        this.visible = true;\r\n        if (this.domElement.classList.contains(\"vr-span\"))\r\n            this.paddingToMargin();\r\n        this.position = new Position(this.domElement.getBoundingClientRect(), layer * this.web2vr.settings.layerStep, web2vr.settings.scale);\r\n        this.style = window.getComputedStyle(this.domElement);\r\n        this.parentTransform = \"none\";\r\n    }\r\n\r\n    // call after entity is created in inheriting class\r\n    initEventHandlers() {\r\n        this.initHover();\r\n\r\n        // setting up MouseEventHandler\r\n        this.mouseEventHandle = new MouseEventHandler(this);\r\n\r\n        // dynamic listeners\r\n        this.domElement.addEventListener(\"eventListenerAdded\", () => this.mouseEventHandle.resync());\r\n        this.domElement.addEventListener(\"eventListenerRemoved\", () => this.mouseEventHandle.resync());\r\n    }\r\n\r\n    // add animation compoment if dom element has animation\r\n    checkAnimation() {\r\n        if (parseFloat(this.style.animationDuration) || parseFloat(this.style.transitionDuration))\r\n            this.entity.setAttribute(\"vr-animate\", \"\");\r\n        else\r\n            this.entity.removeAttribute(\"vr-animate\");\r\n    }\r\n\r\n    initHover() {\r\n        // find what has hover\r\n        let tag = null;\r\n        if (this.web2vr.hoverSelectors.has(this.domElement.tagName.toLowerCase()))\r\n            tag = this.domElement.tagName.toLowerCase();\r\n        let classes = [];\r\n        for (const cls of this.domElement.classList) {\r\n            if (this.web2vr.hoverSelectors.has(\".\" + cls))\r\n                classes.push(cls);\r\n        }\r\n        let id = null;\r\n        if (this.web2vr.hoverSelectors.has(\"#\" + this.domElement.id))\r\n            id = this.domElement.id;\r\n\r\n        // add mouseenter and mouseleave if element has hover.\r\n        if (tag || classes.length > 0 || id) {\r\n            this.entity.addEventListener(\"mouseenter\", () => {\r\n                if (tag)\r\n                    this.domElement.classList.add(tag + \"hover\");\r\n                if (classes.length > 0)\r\n                    for (const cls of classes)\r\n                        this.domElement.classList.add(cls + \"hover\");\r\n                if (id)\r\n                    this.domElement.classList.add(id + \"hover\");\r\n                // this is only for hover transform. Update all elements when transform gets added\r\n                if (this.style.transform != \"none\") {\r\n                    this.web2vr.update();\r\n                    this.hoverTransform = true;\r\n                }\r\n\r\n            });\r\n            this.entity.addEventListener(\"mouseleave\", () => {\r\n                if (tag)\r\n                    this.domElement.classList.remove(tag + \"hover\");\r\n                if (classes.length > 0)\r\n                    for (const cls of classes)\r\n                        this.domElement.classList.remove(cls + \"hover\");\r\n                if (id)\r\n                    this.domElement.classList.remove(id + \"hover\");\r\n                if (this.hoverTransform) {\r\n                    this.position.depth = this.position.startDepth;\r\n                    for (const element of this.domElement.querySelectorAll('*')) {\r\n                        if (element.element) {\r\n                            element.element.parentTransform = \"none\";\r\n                            element.element.position.depth = element.element.position.startDepth;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // getBoundingClientRect works great with margin while with padding it has problems with paddingRight that needs to be manualy calculated and set\r\n    // because dealing with paddingRight is problematic we can make the padding be margin for the textNode(vr-span)\r\n    paddingToMargin() {\r\n        // only if element has text\r\n        if (this.domElement.textContent.trim()) {\r\n            //const left = this.domElement.parentElement.element.style.paddingLeft;\r\n            const right = this.domElement.parentElement.element.style.paddingRight;\r\n            //const top = this.domElement.parentElement.element.style.paddingTop;\r\n            //const bottom = this.domElement.parentElement.element.style.paddingBottom;\r\n\r\n            /*if (parseFloat(left)) {\r\n                this.domElement.style.marginLeft = left;\r\n                this.domElement.parentElement.style.paddingLeft = \"0px\";\r\n            }*/\r\n            if (parseFloat(right)) {\r\n                this.domElement.style.marginRight = right;\r\n                this.domElement.parentElement.style.paddingRight = \"0px\";\r\n            }\r\n            /*if (parseFloat(top)) {\r\n                this.domElement.style.marginTop = top;\r\n                //this.domElement.parentElement.style.paddingTop = \"0px\";\r\n            }\r\n            if (parseFloat(bottom)) {\r\n                this.domElement.style.marginBottom = bottom;\r\n                //this.domElement.parentElement.style.paddingBottom = \"0px\";\r\n            }*/\r\n        }\r\n    }\r\n\r\n    init() {\r\n        // reference of the element for aframe compoment\r\n        this.entity.element = this;\r\n\r\n        // dont need light to affect material\r\n        this.entity.setAttribute(\"material\", \"shader\", \"flat\");\r\n\r\n        //init sizes at start\r\n        this.entity.setAttribute(\"width\", this.position.width);\r\n        this.entity.setAttribute(\"height\", this.position.height);\r\n\r\n        this.initEventHandlers();\r\n\r\n        this.setupClipping();\r\n    }\r\n\r\n    update() {\r\n        const clientRect = this.domElement.getBoundingClientRect();\r\n\r\n        // its not on the screen\r\n        if (clientRect.width == 0 || clientRect.height == 0) {\r\n            this.entity.object3D.visible = false;\r\n            if (!this.domElement.classList.contains(\"vr-span\"))\r\n                this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n            this.position.aframePosition.y = 1000; // for some reason raycast still hits so have to move position\r\n            return;\r\n        }\r\n\r\n        // for future move this in TextElement class\r\n        if (this.domElement.classList.contains(\"vr-span\")) {\r\n            // dont need interaction with the text when we always have the background as interaction\r\n            this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n            // so all inline text width is good, dont do this if its text inside button\r\n            if (this.domElement.parentElement.tagName != \"BUTTON\") {\r\n                clientRect.width += 8;\r\n                clientRect.x -= 2;\r\n            }\r\n        }\r\n\r\n        // set fixed container height if its using scrollBody, best is to move this code outside update loop for future\r\n        if (this.web2vr.scroll.hasScroll && this.domElement == this.web2vr.container && this.web2vr.scroll.scrollBody)\r\n            clientRect.height = this.web2vr.settings.scrollWindowHeight;\r\n        this.position.updatePosition(clientRect);\r\n\r\n        this.checkVisible();\r\n        if (this.visible) {\r\n            this.style = window.getComputedStyle(this.domElement);\r\n\r\n            // its on visible screen but its hidden by style\r\n            if (this.style.visibility === \"hidden\" || this.style.display === \"none\") {\r\n                this.entity.object3D.visible = false;\r\n                if (!this.domElement.classList.contains(\"vr-span\"))\r\n                    this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n                this.position.aframePosition.y = 1000; // for some reason raycast still hits so have to move position\r\n                // update border so we can remove it because element is hidden\r\n                this.updateBorder();\r\n                return;\r\n            }\r\n            else {\r\n                this.entity.object3D.visible = true;\r\n                // for input text because it has custom event for entity it cannot detect with this.mouseEventHandle.listeningForMouseEvents\r\n                // we have to check tagName and type to see if its input text, for future make this work with mouseEventHandle\r\n                // also add interactiveTag if its main container\r\n                if ((!this.domElement.classList.contains(\"vr-span\") && (this.mouseEventHandle.listeningForMouseEvents || (this.domElement.tagName == \"INPUT\" && this.domElement.type == \"text\")) || this.domElement == this.web2vr.container))\r\n                    this.entity.classList.add(this.web2vr.settings.interactiveTag);\r\n            }\r\n            if (this.style.transform == \"none\") {\r\n                this.entity.setAttribute(\"width\", this.position.width);\r\n                this.entity.setAttribute(\"height\", this.position.height);\r\n            }\r\n\r\n            this.checkAnimation();\r\n\r\n            const opacity = this.style.opacity;\r\n            this.entity.setAttribute(\"opacity\", opacity);\r\n\r\n            this.specificUpdate();\r\n            this.updateTransform();\r\n            this.updateClipping();\r\n        }\r\n        this.updateBorder();\r\n    }\r\n\r\n    updateTransform() {\r\n\r\n        let transform = this.style.transform;\r\n        if (transform == \"none\")\r\n            transform = this.parentTransform;\r\n        else {\r\n            // give transform to all descendents\r\n            for (const element of this.domElement.querySelectorAll('*')) {\r\n                if (element.element)\r\n                    element.element.parentTransform = transform;\r\n            }\r\n        }\r\n\r\n        if (transform != \"none\") {\r\n            const matrixType = transform.split('(')[0];\r\n            // get matrix values in float\r\n            let values = transform.split('(')[1];\r\n            values = values.split(')')[0];\r\n            values = values.split(',');\r\n            values = values.map(v => parseFloat(v));\r\n            let matrix = null;\r\n\r\n            if (matrixType == \"matrix\") {\r\n                // transform to matrix4x4 and invert skewX to match three.js\r\n                matrix = new THREE.Matrix4().fromArray([values[0], values[1], 0, 0, -values[2], values[3], 0, 0, 0, 0, 1, 0, values[4], values[5], 0, 1]);\r\n            }\r\n            else if (matrixType == \"matrix3d\") {\r\n                // invert skewX and skewZ? to match three.js\r\n                values[4] *= -1;\r\n                values[9] *= -1;\r\n                matrix = new THREE.Matrix4().fromArray(values);\r\n            }\r\n            const position = new THREE.Vector3();\r\n            const quaternion = new THREE.Quaternion();\r\n            const scale = new THREE.Vector3();\r\n            matrix.decompose(position, quaternion, scale);\r\n\r\n            // position\r\n            this.position.domPosition.x += position.x;\r\n            this.position.domPosition.y += position.y;\r\n            if (position.z != 0)\r\n                this.position.depth = position.z * this.position.scalingFactor + this.position.startDepth;\r\n\r\n            // rotation\r\n            this.entity.object3D.rotation.setFromRotationMatrix(matrix);\r\n\r\n            // calcualte scale and set it to entity\r\n            if (this.parentTransform == \"none\") {\r\n                const elements = matrix.elements;\r\n                const scaleX = Math.sqrt(elements[0] * elements[0] + elements[1] * elements[1]);\r\n                const scaleY = Math.sqrt(elements[5] * elements[5] + elements[4] * elements[4]);\r\n                // for radio scale is 2 times smaller because its circle\r\n                if (this.domElement.tagName == \"INPUT\" && this.domElement.type == \"radio\")\r\n                    this.entity.object3D.scale.set(scaleX / 2, scaleY / 2, 1);\r\n                else\r\n                    this.entity.object3D.scale.set(scaleX, scaleY, 1);\r\n            }\r\n        }\r\n        this.entity.object3D.position.set(this.position.x, this.position.y, this.position.z);\r\n    }\r\n\r\n    // abstract method\r\n    specificUpdate() {\r\n\r\n    }\r\n\r\n    updateBorder() {\r\n        if (this.web2vr.settings.border) {\r\n            // using borderTopWidth and borderTopColor because borderWidth and borderColor doesnt work in firefox\r\n            const borderWidth = parseFloat(this.style.borderTopWidth);\r\n            if ((borderWidth || this.borderWidth) && this.entity.object3D.visible) {\r\n                this.entity.setAttribute(\"vr-border\", `width:${borderWidth}; color:${this.style.borderTopColor};`);\r\n                this.entity.components[\"vr-border\"].updateBorder();\r\n            }\r\n            else if (this.entity.components[\"vr-border\"])\r\n                this.entity.removeAttribute(\"vr-border\");\r\n        }\r\n    }\r\n\r\n    rotateNormal(normal) {\r\n        const normalMatrix = new THREE.Matrix3().getNormalMatrix(this.web2vr.aframe.container.object3D.matrixWorld);\r\n        const output = normal.clone().applyMatrix3(normalMatrix).normalize();\r\n        return output;\r\n    }\r\n\r\n    getClippingContext() {\r\n        let output = null;\r\n\r\n        if (this.domElement.parentNode && this.domElement.parentNode.element && this.domElement.parentNode.element.clippingContext)\r\n            output = this.domElement.parentNode.element.clippingContext;\r\n        else {\r\n            if ((this.style.overflow && this.style.overflow == \"hidden\") || (this.web2vr.scroll.hasScroll && this.domElement == this.web2vr.container) || (this.web2vr.settings.forceClipping && this.domElement == this.web2vr.container)) {\r\n                // ignore if its svg\r\n                if (this.domElement.tagName != \"svg\") {\r\n                    let clippingContext = {};\r\n                    clippingContext.authority = this;\r\n\r\n                    clippingContext.bottom = new THREE.Plane(this.rotateNormal(new THREE.Vector3(0, 1, 0))); // normal up\r\n                    clippingContext.top = new THREE.Plane(this.rotateNormal(new THREE.Vector3(0, -1, 0))); // normal down\r\n                    clippingContext.left = new THREE.Plane(this.rotateNormal(new THREE.Vector3(1, 0, 0))); // normal right\r\n                    clippingContext.right = new THREE.Plane(this.rotateNormal(new THREE.Vector3(-1, 0, 0))); // normal left\r\n\r\n                    clippingContext.planes = [clippingContext.bottom, clippingContext.top, clippingContext.left, clippingContext.right];\r\n\r\n                    output = clippingContext;\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    }\r\n\r\n    setupClipping() {\r\n        const clippingContext = this.getClippingContext();\r\n\r\n        if (clippingContext) {\r\n            this.clippingContext = clippingContext;\r\n\r\n            // we are sure the renderer is loaded\r\n            const object3D = this.entity.object3D;\r\n            if (!object3D || !object3D.children || !object3D.children.length > 0 || !object3D.children[0].material) {\r\n                return;\r\n            }\r\n\r\n            const material = object3D.children[0].material;\r\n            material.clippingPlanes = clippingContext.planes;\r\n\r\n            //this.updateClipping();\r\n            setTimeout(() => { this.updateClipping(); }, 200); // if it doesnt work use this\r\n        }\r\n    }\r\n\r\n    updateClipping() {\r\n        // only element with authority can change the clipping planes position\r\n        if (!this.clippingContext || this.clippingContext.authority != this)\r\n            return;\r\n\r\n        const position = this.entity.object3D.position;\r\n\r\n        const bottomLocal = position.clone().add((new THREE.Vector3(0, -1, 0)).multiplyScalar(this.position.height / 2));\r\n        const topLocal = position.clone().add((new THREE.Vector3(0, 1, 0)).multiplyScalar(this.position.height / 2));\r\n        const leftLocal = position.clone().add((new THREE.Vector3(-1, 0, 0)).multiplyScalar(this.position.width / 2));\r\n        const rightLocal = position.clone().add((new THREE.Vector3(1, 0, 0)).multiplyScalar(this.position.width / 2));\r\n\r\n        const bottomGlobal = this.web2vr.aframe.container.object3D.localToWorld(bottomLocal.clone());\r\n        const topGlobal = this.web2vr.aframe.container.object3D.localToWorld(topLocal.clone());\r\n        const leftGlobal = this.web2vr.aframe.container.object3D.localToWorld(leftLocal.clone());\r\n        const rightGlobal = this.web2vr.aframe.container.object3D.localToWorld(rightLocal.clone());\r\n\r\n        this.clippingContext.bottom.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(0, 1, 0)), bottomGlobal).normalize();\r\n        this.clippingContext.top.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(0, -1, 0)), topGlobal).normalize();\r\n        this.clippingContext.left.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(1, 0, 0)), leftGlobal).normalize();\r\n        this.clippingContext.right.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(-1, 0, 0)), rightGlobal).normalize();\r\n\r\n        if (this.web2vr.settings.showClipping) {\r\n            if (!this.clippingPlaneHelpers) {\r\n                this.clippingPlaneHelpers = [];\r\n\r\n                for (const plane of this.clippingContext.planes) {\r\n                    const material = new THREE.MeshBasicMaterial({ color: 0x00e33d, side: THREE.DoubleSide });\r\n                    const geometry = new THREE.PlaneGeometry(200 * this.position.scalingFactor, 200 * this.position.scalingFactor); // no need same width and height as container because this is only for debugging\r\n                    const mesh = new THREE.Mesh(geometry, material);\r\n\r\n                    mesh.debugPlane = plane;\r\n                    this.clippingPlaneHelpers.push(mesh);\r\n\r\n                    const axisHelper = new THREE.AxesHelper(5);\r\n                    mesh.add(axisHelper);\r\n                }\r\n\r\n                for (const helper of this.clippingPlaneHelpers) {\r\n                    this.web2vr.aframe.scene.object3D.add(helper);\r\n                }\r\n            }\r\n            for (const mesh of this.clippingPlaneHelpers) {\r\n                mesh.visible = true;\r\n\r\n                const worldPos = new THREE.Vector3();\r\n                this.entity.object3D.getWorldPosition(worldPos);\r\n                const point = new THREE.Vector3();\r\n                mesh.debugPlane.projectPoint(worldPos, point);\r\n                mesh.position.set(point.x, point.y, point.z);\r\n\r\n                // clipping plane normals are inverted, we multiply by -1\r\n                const focalPoint = point.clone().add(mesh.debugPlane.normal.clone().multiplyScalar(-1));\r\n                mesh.lookAt(focalPoint);\r\n            }\r\n\r\n        }\r\n        else {\r\n            if (this.clippingPlaneHelpers) {\r\n                for (const mesh of this.clippingPlaneHelpers)\r\n                    mesh.visible = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    checkVisible() {\r\n        if (this.clippingContext) {\r\n            const container = this.clippingContext.authority;\r\n            if (this.position.bottom.y > container.position.top.y || this.position.top.y < container.position.bottom.y) {\r\n                this.visible = false;\r\n                this.entity.object3D.visible = false;\r\n                // remove interactive tag\r\n                if (!this.domElement.classList.contains(\"vr-span\"))\r\n                    this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n            }\r\n            else {\r\n                this.visible = true;\r\n                this.entity.object3D.visible = true;\r\n                // interactive tag so we can do raycasting if it has mouse events or its container background\r\n                if ((!this.domElement.classList.contains(\"vr-span\") && this.mouseEventHandle.listeningForMouseEvents) || this.domElement == this.web2vr.container)\r\n                    this.entity.classList.add(this.web2vr.settings.interactiveTag);\r\n            }\r\n        }\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class ImageElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n\r\n        this.currentSrc = null;\r\n        this.changed = false;\r\n        this.entity = document.createElement(\"a-image\");\r\n        this.entity.setAttribute(\"material\", \"side\", \"front\");\r\n        // know when image is loaded\r\n        this.loaded = false;\r\n        this.domElement.addEventListener(\"load\", () => {\r\n            this.loaded = true;\r\n            // if image changed update all after image loaded\r\n            if (this.changed) {\r\n                this.changed = false;\r\n                this.web2vr.update();\r\n            }\r\n        });\r\n    }\r\n    updateImage(src) {\r\n        const assetID = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\r\n        this.entity.setAttribute(\"id\", \"IMAGE_\" + assetID);\r\n\r\n        const isGif = /\\.(gif)$/i;\r\n        if (isGif.test(src)) {\r\n            this.entity.setAttribute(\"material\", \"shader\", \"gif\");\r\n            this.entity.setAttribute(\"material\", \"src\", \"#\" + assetID);\r\n        }\r\n        else {\r\n            this.entity.setAttribute(\"material\", \"shader\", \"flat\");\r\n            this.entity.setAttribute(\"src\", \"#\" + assetID);\r\n        }\r\n    }\r\n\r\n    specificUpdate() {\r\n        const src = this.domElement.getAttribute(\"src\");\r\n        if (src != this.currentSrc) {\r\n            if (this.currentSrc) {\r\n                this.loaded = false;\r\n                this.changed = true;\r\n            }\r\n            this.currentSrc = src;\r\n            this.updateImage(this.currentSrc);\r\n        }\r\n    }\r\n}","import TextElement from \"./textElement\";\r\n\r\nexport default class InputElement extends TextElement {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        this.borderColor = new THREE.Color(0x000000);\r\n        this.borderWidth = 1;\r\n        this.active = false;\r\n\r\n        // update when there is change of value\r\n        this.domElement.addEventListener(\"input\", () => this.update());\r\n        // when clicked make it active input for the keyboard and position the keyboard relative to camera\r\n        this.entity.addEventListener(\"click\", () => {\r\n            const camera = this.web2vr.aframe.scene.camera.parent;\r\n            const keyboard = this.web2vr.aframe.keyboard.object3D;\r\n\r\n            keyboard.position.copy(camera.position);\r\n            keyboard.rotation.copy(camera.rotation);\r\n            keyboard.rotation.z = 0;\r\n            keyboard.rotation.x = THREE.Math.degToRad(-30);\r\n            keyboard.translateX(-0.24);\r\n            keyboard.translateY(-0.1);\r\n            keyboard.translateZ(-0.6);\r\n            keyboard.visible = true;\r\n\r\n            if (this.web2vr.aframe.keyboard.activeInput){\r\n                this.web2vr.aframe.keyboard.activeInput.element.active = false;\r\n                // update web2vr where activeInput is located\r\n                this.web2vr.aframe.keyboard.activeInput.element.web2vr.update();\r\n            }\r\n            this.active = true;\r\n\r\n            this.web2vr.aframe.keyboard.activeInput = this.domElement;\r\n            this.web2vr.update();\r\n        })\r\n    }\r\n\r\n    updateText() {\r\n        const value = this.domElement.value;\r\n        if (value)\r\n            this.textValue = value;\r\n        else\r\n            this.textValue = this.domElement.placeholder;\r\n    }\r\n    updateTextColor() {\r\n        const value = this.domElement.value;\r\n        if (value)\r\n            super.updateTextColor();\r\n        else\r\n            this.entity.setAttribute(\"text\", \"color\", \"#999\");\r\n\r\n        if (this.active)\r\n            this.entity.setAttribute(\"color\", \"#ffffcc\");\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class RadioElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        this.borderColor = new THREE.Color(0x000000);\r\n        this.borderWidth = 1;\r\n        this.entity = document.createElement(\"a-circle\");\r\n        this.domElement.addEventListener(\"click\", (() => {\r\n            this.web2vr.update();\r\n        }).bind(this));\r\n    }\r\n\r\n    specificUpdate() {\r\n        this.entity.setAttribute(\"radius\", this.position.width / 2);\r\n        \r\n            if (this.domElement.checked)\r\n                this.entity.setAttribute(\"color\", \"#0075FF\");\r\n            else\r\n                this.entity.setAttribute(\"color\", \"#FFFFFF\");\r\n        }\r\n    }","import Element from \"./element\";\r\n\r\nexport default class SvgElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n\r\n        this.imageId = null;\r\n        this.entity = document.createElement(\"a-image\");\r\n    }\r\n\r\n    svgToImage() {\r\n        const svgString = new XMLSerializer().serializeToString(this.domElement);\r\n        const canvas = document.createElement(\"canvas\");\r\n        const ctx = canvas.getContext(\"2d\");\r\n        canvas.width = this.position.domPosition.width * 2;\r\n        canvas.height = this.position.domPosition.height * 2;\r\n\r\n        const DOMURL = self.URL || self.webkitURL || self;\r\n        const img = new Image();\r\n        const svg = new Blob([svgString], { type: \"image/svg+xml;charset=utf-8\" });\r\n        const url = DOMURL.createObjectURL(svg);\r\n\r\n        img.onload = () => {\r\n            if (this.domElement.style.width)\r\n                ctx.drawImage(img, 0, 0, canvas.width*2, canvas.height*2);\r\n            else\r\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n\r\n            DOMURL.revokeObjectURL(url);\r\n            this.updateImage(canvas.toDataURL());\r\n            canvas.remove();\r\n        };\r\n        img.src = url;\r\n    }\r\n    updateImage(src) {\r\n        const assetId = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\r\n\r\n        // remove old image if there is new image\r\n        if (this.imageId && this.imageId != assetId)\r\n            this.web2vr.aframe.assetManager.removeAsset(this.imageId);\r\n\r\n        this.entity.setAttribute(\"id\", \"IMAGE_\" + assetId);\r\n        this.entity.setAttribute(\"src\", \"#\" + assetId);\r\n        this.imageId = assetId;\r\n    }\r\n\r\n    specificUpdate() {\r\n        this.svgToImage();\r\n    }\r\n}","import ContainerElement from \"./containerElement\";\r\n\r\nexport default class TextElement extends ContainerElement {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer, false);\r\n\r\n        this.entity.setAttribute(\"text\", \"value\", \"\");\r\n        this.textValue = null;\r\n    }\r\n\r\n    setupClipping() {\r\n        let clippingContext = this.getClippingContext();\r\n\r\n        if (clippingContext) {\r\n            this.clippingContext = clippingContext;\r\n\r\n            let material = this.entity.components.text.material;\r\n\r\n            // text component uses custom shader so default three.js clipping doesnt work, needed to inject clipping shader code inside the custom shader code(RawShaderMaterial)\r\n            // help from https://stackoverflow.com/questions/42532545/add-clipping-to-three-shadermaterial\r\n            // 1.0.2 version changes: Because Aframe 1.1.0 changes text material shader to use webgl 2(glsl 3) some of the three.js ShaderChunk had to be converted to glsl 3.\r\n            const fragmentShader = `#version 300 es\r\n            precision highp float;\r\n            uniform bool negate;\r\n            uniform float alphaTest;\r\n            uniform float opacity;\r\n            uniform sampler2D map;\r\n            uniform vec3 color;\r\n            in vec2 vUV;\r\n            out vec4 fragColor;\r\n            float median(float r, float g, float b) {\r\n                return max(min(r, g), min(max(r, g), b));\r\n            }\r\n            #define BIG_ENOUGH 0.001\r\n            #define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\r\n            \r\n            // clipping_planes_pars_fragment converted to glsl 3\r\n            #if NUM_CLIPPING_PLANES > 0\r\n                in vec3 vClipPosition;\r\n                uniform vec4 clippingPlanes[NUM_CLIPPING_PLANES];\r\n            #endif\r\n            \r\n            void main() {\r\n                // compatible with glsl 3\r\n                #include <clipping_planes_fragment>\r\n\r\n                vec3 sampleColor = texture(map, vUV).rgb;\r\n                if (negate) { sampleColor = 1.0 - sampleColor; }\r\n                float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;\r\n                float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);\r\n                float dscale = 0.353505;\r\n                vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));\r\n                float isBigEnough = max(abs(duv.x), abs(duv.y));\r\n                // Do modified alpha test.\r\n                if (isBigEnough > BIG_ENOUGH) {\r\n                    float ratio = BIG_ENOUGH / isBigEnough;\r\n                    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);\r\n                }\r\n                // Do modified alpha test.\r\n                if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\r\n                fragColor = vec4(color.xyz, alpha * opacity);\r\n            }`;\r\n\r\n            const vertexShader = `#version 300 es\r\n            in vec2 uv;\r\n            in vec3 position;\r\n            uniform mat4 projectionMatrix;\r\n            uniform mat4 modelViewMatrix;\r\n            out vec2 vUV;\r\n\r\n            // clipping_planes_pars_vertex converted to glsl 3\r\n            #if NUM_CLIPPING_PLANES > 0\r\n\t            out vec3 vClipPosition;\r\n            #endif\r\n\r\n            void main(void) {\r\n                // compatible with glsl 3\r\n                #include <begin_vertex>\r\n\r\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n                vUV = uv;\r\n\r\n                // compatible with glsl 3\r\n                #include <project_vertex>\r\n                #include <clipping_planes_vertex>\r\n\r\n            }`;\r\n\r\n            material.fragmentShader = fragmentShader;\r\n            material.vertexShader = vertexShader;\r\n            material.clipping = true;\r\n            material.clippingPlanes = clippingContext.planes;\r\n\r\n            this.updateClipping();\r\n        }\r\n    }\r\n\r\n    updateTextAlignment() {\r\n        // align css text-align to text component\r\n        let align = this.style.textAlign;\r\n        if (![\"left\", \"right\", \"center\"].includes(align))\r\n            align = \"left\";\r\n        this.entity.setAttribute(\"text\", \"align\", align);\r\n\r\n        // set text lineHeight if it has custom css lineHeight\r\n        const text = this.entity.components.text;\r\n        if (this.style.lineHeight != \"normal\" && (typeof text.currentFont != \"undefined\")) {\r\n            this.entity.setAttribute(\"text\", \"lineHeight\", text.currentFont.common.lineHeight + parseFloat(this.style.lineHeight));\r\n        }\r\n    }\r\n\r\n    updateTextSize() {\r\n        const actualFontSize = parseFloat(this.style.fontSize);\r\n        const width = this.position.width;\r\n\r\n        const widthInPixels = width / this.position.scalingFactor;\r\n        let wrapPixels = widthInPixels * 42 / actualFontSize;\r\n        wrapPixels *= 1.107; //1.10706774183070233\r\n        this.entity.setAttribute(\"text\", \"wrapPixels\", wrapPixels);\r\n        this.entity.setAttribute(\"text\", \"width\", width);\r\n    }\r\n\r\n    updateTextColor() {\r\n        // opacity from parent because it doesnt pass it to children\r\n        const opacity = this.domElement.parentElement.element.style.opacity;\r\n        this.entity.setAttribute(\"text\", \"opacity\", opacity);\r\n\r\n        const textColor = this.style.color;\r\n        this.entity.setAttribute(\"text\", \"color\", textColor);\r\n    }\r\n\r\n    updateText() {\r\n        // remove new lines and whitespaces\r\n        this.textValue = this.domElement.textContent.replace(/\\s{2,}/g, ' ');\r\n    }\r\n\r\n    specificUpdate() {\r\n        super.specificUpdate();\r\n\r\n        this.updateTextSize();\r\n        this.updateTextAlignment();\r\n        this.updateText();\r\n        this.entity.setAttribute(\"text\", \"value\", this.textValue);\r\n        this.updateTextColor();\r\n    }\r\n}","import Element from \"./element\";\r\n\r\nexport default class VideoElement extends Element {\r\n    constructor(web2vr, domElement, layer) {\r\n        super(web2vr, domElement, layer);\r\n        // normal video\r\n        this.entity = document.createElement(\"a-video\");\r\n        // 360 video\r\n        this.video360 = document.createElement(\"a-videosphere\");\r\n        this.web2vr.aframe.scene.appendChild(this.video360);\r\n        this.current360Src = null;\r\n\r\n        this.createClickEvent();\r\n\r\n        this.domElement.addEventListener(\"play\", () => {\r\n            if (this.domElement.hasAttribute(\"vr\"))\r\n                this.video360.components.material.material.map.image.play();\r\n        });\r\n\r\n        this.domElement.addEventListener(\"pause\", () => {\r\n            if (this.domElement.hasAttribute(\"vr\"))\r\n                this.video360.components.material.material.map.image.pause();\r\n        });\r\n\r\n        // update elements when video loaded\r\n        this.domElement.addEventListener(\"loadeddata\", () => {\r\n            this.web2vr.update();\r\n        });\r\n    }\r\n\r\n    init() {\r\n        // this is async dynamic so no need to put in update\r\n        const texture = new THREE.VideoTexture(this.domElement);\r\n        texture.minFilter = THREE.LinearFilter;\r\n        texture.magFilter = THREE.LinearFilter;\r\n        texture.format = THREE.RGBAFormat;\r\n\r\n        this.entity.object3D.children[0].material = new THREE.MeshBasicMaterial({ map: texture });\r\n        super.init();\r\n    }\r\n\r\n    createClickEvent() {\r\n        // for normal video\r\n        this.domElement.addEventListener(\"click\", () => {\r\n            this.domElement.paused ? this.domElement.play() : this.domElement.pause();\r\n        });\r\n        // for 360 video\r\n        /*this.video360.addEventListener(\"click\", () => {\r\n            if (this.domElement.paused) {\r\n                this.domElement.play();\r\n                this.video360.components.material.material.map.image.play();\r\n            }\r\n            else {\r\n                this.domElement.pause();\r\n                this.video360.components.material.material.map.image.pause();\r\n            }\r\n        });**/\r\n    }\r\n\r\n    specificUpdate() {\r\n        if (this.domElement.hasAttribute(\"vr\")) {\r\n            this.video360.object3D.visible = true;\r\n            this.video360.classList.add(this.web2vr.settings.interactiveTag);\r\n            this.entity.object3D.visible = false;\r\n            this.entity.classList.remove(this.web2vr.settings.interactiveTag);\r\n\r\n            const src = this.domElement.firstElementChild.src;\r\n            if (this.current360Src != src) {\r\n                const assetID = this.web2vr.aframe.assetManager.getAsset(src, \"video\");\r\n                this.video360.setAttribute(\"src\", \"#\" + assetID);\r\n                // set video360 rotation\r\n                const rotation = this.domElement.getAttribute(\"vr\");\r\n                if (rotation)\r\n                    this.video360.object3D.rotation.y = THREE.Math.degToRad(rotation);\r\n                else\r\n                    this.video360.object3D.rotation.y = 0;\r\n\r\n                // no need for audio because we have it from the html where we control it\r\n                if (this.video360.components.material.material.map)\r\n                    this.video360.components.material.material.map.image.muted = true;\r\n            }\r\n        }\r\n        else {\r\n            this.video360.object3D.visible = false;\r\n            this.video360.classList.remove(this.web2vr.settings.interactiveTag);\r\n            this.entity.object3D.visible = true;\r\n            this.entity.classList.add(this.web2vr.settings.interactiveTag);\r\n        }\r\n    }\r\n}","!function(e){var t={};function a(d){if(t[d])return t[d].exports;var n=t[d]={i:d,l:!1,exports:{}};return e[d].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,d){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:d})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)a.d(d,n,function(t){return e[t]}.bind(null,n));return d},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=0)}([function(e,t,a){a(1),a(3);const d=a(4),n={mode:\"normal\"};n.template=new d,e.exports=window.AFK=n},function(e,t,a){const d=a(2);if(\"undefined\"==typeof AFRAME)throw new Error(\"Component attempted to register before AFRAME was available.\");AFRAME.registerComponent(\"a-keyboard\",{schema:{audio:{default:!1},color:{default:\"#fff\"},highlightColor:{default:\"#1a79dc\"},dismissable:{default:!0},font:{default:\"monoid\"},fontSize:{default:\"0.39\"},locale:{default:\"en\"},model:{default:\"\"},baseTexture:{default:\"\"},keyTexture:{default:\"\"},verticalAlign:{default:\"center\"}},init:function(){AFK.template.draw({...this.data,el:this.el}),this.attachEventListeners()},attachEventListeners:function(){window.addEventListener(\"keydown\",this.handleKeyboardPress),this.el.addEventListener(\"click\",this.handleKeyboardVR)},removeEventListeners:function(){window.removeEventListener(\"keydown\",this.handleKeyboardPress),this.el.removeEventListener(\"click\",this.handleKeyboardVR)},handleKeyboardPress:function(e){d(e)},handleKeyboardVR:function(e){d(e,\"vr\")},remove:function(){this.removeEventListeners()}})},function(e,t){e.exports=function(e,t){let a;const d=new Set([16,17,18,20,33,34,35,36,45,46,112,113,114,115,116,117,118,119,120,121,122,123]),n=e.key&&e.key.charCodeAt(0);let r=e.key,s=e.keyCode;if(\"vr\"===t)s=parseInt(document.querySelector(`#${e.target.id}`).getAttribute(\"key-code\")),r=document.querySelector(`#${e.target.id}`).getAttribute(\"value\");else if(d.has(e.keyCode))return;switch(s){case 9:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\"\\t\"}}),document.dispatchEvent(a);break;case 8:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\"\"}}),document.dispatchEvent(a);break;case 13:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\"\\n\"}}),document.dispatchEvent(a);break;case 16:AFK.template.toggleActiveMode(\"shift\");break;case 18:AFK.template.toggleActiveMode(\"alt\");break;case 27:this.dismissable&&(a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\"\"}}),document.dispatchEvent(a));break;case 32:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:\" \"}}),document.dispatchEvent(a);break;default:a=new CustomEvent(\"a-keyboard-update\",{detail:{code:s,value:r}}),document.dispatchEvent(a)}if(\"vr\"!==t){const t=document.querySelector(`#a-keyboard-${n}`)||document.querySelector(`#a-keyboard-${e.keyCode}`);t&&(t.dispatchEvent(new Event(\"mousedown\")),setTimeout((function(){t.dispatchEvent(new Event(\"mouseleave\"))}),80))}}},function(e,t){if(\"undefined\"==typeof AFRAME)throw new Error(\"Component attempted to register before AFRAME was available.\");AFRAME.registerComponent(\"keyboard-button\",{init:function(){const e=this.el;e.addEventListener(\"mousedown\",(function(){e.setAttribute(\"material\",\"opacity\",\"0.7\")})),e.addEventListener(\"mouseup\",()=>{e.setAttribute(\"material\",\"opacity\",this.isMouseEnter?\"0.9\":\"0\")}),e.addEventListener(\"mouseenter\",()=>{e.setAttribute(\"material\",\"opacity\",\"0.9\"),self.isMouseEnter=!0}),e.addEventListener(\"mouseleave\",()=>{e.setAttribute(\"material\",\"opacity\",\"0\"),self.isMouseEnter=!1})}})},function(e,t,a){const d=a(5);e.exports=class{constructor(){this.keyboardKeys={},this.activeMode=\"normal\"}draw(e){for(const t in e)this[t]=e[t];this.keyboardKeys=d(e.locale),this.drawKeyboard()}drawButton(e){const t=e.key,a=t.size.split(\" \")[0],d=t.size.split(\" \")[1],n=document.createElement(\"a-entity\");n.setAttribute(\"position\",e.position);const r=document.createElement(\"a-entity\");r.setAttribute(\"geometry\",`primitive: plane; width: ${a}; height: ${d};`),this.keyTexture&&this.keyTexture.length>0?r.setAttribute(\"material\",`src: ${this.keyTexture}`):r.setAttribute(\"material\",\"color: #4a4a4a; opacity: 0.9\");const s=document.createElement(\"a-text\");s.id=`a-keyboard-${t.code}`,s.setAttribute(\"key-code\",t.code),s.setAttribute(\"value\",t.value),s.setAttribute(\"align\",\"center\"),s.setAttribute(\"baseline\",this.verticalAlign),s.setAttribute(\"position\",\"0 0 0.001\"),s.setAttribute(\"width\",this.fontSize),s.setAttribute(\"height\",this.fontSize),s.setAttribute(\"geometry\",`primitive: plane; width: ${a}; height: ${d}`),s.setAttribute(\"material\",`opacity: 0.0; transparent: true; color: ${this.highlightColor}`),s.setAttribute(\"color\",this.color),s.setAttribute(\"font\",this.font),s.setAttribute(\"shader\",\"msdf\"),s.setAttribute(\"negate\",\"false\"),s.setAttribute(\"keyboard-button\",!0),s.setAttribute(\"class\",\"collidable\"),n.appendChild(r),n.appendChild(s),this.el.appendChild(n)}drawKeyboard(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);if(this.keyboardKeys){const e=this.keyboardKeys[this.activeMode]||this.keyboardKeys.normal,t=document.createElement(\"a-entity\"),a=.52,d=.04*e.length+.004*(e.length-1)+.04;t.setAttribute(\"position\",`${a/2-.02} ${-d/2+.02} -0.01`),t.setAttribute(\"geometry\",`primitive: plane; width: ${a}; height: ${d}`),this.baseTexture&&this.baseTexture.length>0?t.setAttribute(\"material\",`src: ${this.baseTexture}`):t.setAttribute(\"material\",\"color: #4a4a4a; side: double; opacity: 0.7\"),this.el.appendChild(t);let n=0;for(let t=0;t<e.length;t++){const a=e[t];let d=0;for(let e=0;e<a.length;e++){const t=a[e],r=this.parseKeyObjects(t);if(!this.dismissable&&\"cancel\"===t.type)continue;const s=r.size.split(\" \")[0],l=r.size.split(\" \")[1];this.drawButton({key:r,position:`${d+s/2} ${n-l/2} 0`}),d+=parseFloat(s)+.004,a.length===e+1&&(n-=.044)}}}}toggleActiveMode(e){e===this.activeMode?(this.activeMode=\"normal\",this.drawKeyboard()):(this.activeMode=e,this.drawKeyboard())}parseKeyObjects(e){const t=e.type,a=e.value;switch(t){case\"delete\":return{size:\"0.04 0.04 0\",value:a,code:\"8\"};case\"enter\":return{size:\"0.04 0.084 0\",value:a,code:\"13\"};case\"shift\":return{size:\"0.084 0.04 0\",value:a,code:\"16\"};case\"alt\":return{size:\"0.084 0.04 0\",value:a,code:\"18\"};case\"space\":return{size:`${.2+.016} 0.04 0`,value:a,code:\"32\"};case\"cancel\":return{size:\"0.084 0.04 0\",value:a,code:\"24\"};case\"submit\":return{size:\"0.084 0.04 0\",value:a,code:\"06\"};default:return{size:\"0.04 0.04 0\",value:a,code:a.charCodeAt(0)}}}}},function(e,t,a){const d=a(6);e.exports=function(e){switch(e){case\"en\":default:return d}}},function(e,t){e.exports={name:\"ms-US-International\",normal:[[{value:\"1\",type:\"standard\"},{value:\"2\",type:\"standard\"},{value:\"3\",type:\"standard\"},{value:\"4\",type:\"standard\"},{value:\"5\",type:\"standard\"},{value:\"6\",type:\"standard\"},{value:\"7\",type:\"standard\"},{value:\"8\",type:\"standard\"},{value:\"9\",type:\"standard\"},{value:\"0\",type:\"standard\"},{value:\"<-\",type:\"delete\"}],[{value:\"q\",type:\"standard\"},{value:\"w\",type:\"standard\"},{value:\"e\",type:\"standard\"},{value:\"r\",type:\"standard\"},{value:\"t\",type:\"standard\"},{value:\"y\",type:\"standard\"},{value:\"u\",type:\"standard\"},{value:\"i\",type:\"standard\"},{value:\"o\",type:\"standard\"},{value:\"p\",type:\"standard\"},{value:\"Ent\",type:\"enter\"}],[{value:\"a\",type:\"standard\"},{value:\"s\",type:\"standard\"},{value:\"d\",type:\"standard\"},{value:\"f\",type:\"standard\"},{value:\"g\",type:\"standard\"},{value:\"h\",type:\"standard\"},{value:\"j\",type:\"standard\"},{value:\"k\",type:\"standard\"},{value:\"l\",type:\"standard\"},{value:'\"',type:\"standard\"}],[{value:\"Shift\",type:\"shift\"},{value:\"z\",type:\"standard\"},{value:\"x\",type:\"standard\"},{value:\"c\",type:\"standard\"},{value:\"v\",type:\"standard\"},{value:\"b\",type:\"standard\"},{value:\"n\",type:\"standard\"},{value:\"m\",type:\"standard\"},{value:\"Alt\",type:\"alt\"}],[{value:\"Cancel\",type:\"cancel\"},{value:\"\",type:\"space\"},{value:\",\",type:\"standard\"},{value:\".\",type:\"standard\"},{value:\"Submit\",type:\"submit\"}]],shift:[[{value:\"1\",type:\"standard\"},{value:\"2\",type:\"standard\"},{value:\"3\",type:\"standard\"},{value:\"4\",type:\"standard\"},{value:\"5\",type:\"standard\"},{value:\"6\",type:\"standard\"},{value:\"7\",type:\"standard\"},{value:\"8\",type:\"standard\"},{value:\"9\",type:\"standard\"},{value:\"0\",type:\"standard\"},{value:\"<-\",type:\"delete\"}],[{value:\"Q\",type:\"standard\"},{value:\"W\",type:\"standard\"},{value:\"E\",type:\"standard\"},{value:\"R\",type:\"standard\"},{value:\"T\",type:\"standard\"},{value:\"Y\",type:\"standard\"},{value:\"U\",type:\"standard\"},{value:\"I\",type:\"standard\"},{value:\"O\",type:\"standard\"},{value:\"P\",type:\"standard\"},{value:\"Ent\",type:\"enter\"}],[{value:\"A\",type:\"standard\"},{value:\"S\",type:\"standard\"},{value:\"D\",type:\"standard\"},{value:\"F\",type:\"standard\"},{value:\"G\",type:\"standard\"},{value:\"H\",type:\"standard\"},{value:\"J\",type:\"standard\"},{value:\"K\",type:\"standard\"},{value:\"L\",type:\"standard\"},{value:'\"',type:\"standard\"}],[{value:\"Shift\",type:\"shift\"},{value:\"Z\",type:\"standard\"},{value:\"X\",type:\"standard\"},{value:\"C\",type:\"standard\"},{value:\"V\",type:\"standard\"},{value:\"B\",type:\"standard\"},{value:\"N\",type:\"standard\"},{value:\"M\",type:\"standard\"},{value:\"Alt\",type:\"alt\"}],[{value:\"Cancel\",type:\"cancel\"},{value:\"\",type:\"space\"},{value:\",\",type:\"standard\"},{value:\".\",type:\"standard\"},{value:\"Submit\",type:\"submit\"}]],alt:[[{value:\"1\",type:\"standard\"},{value:\"2\",type:\"standard\"},{value:\"3\",type:\"standard\"},{value:\"4\",type:\"standard\"},{value:\"5\",type:\"standard\"},{value:\"6\",type:\"standard\"},{value:\"7\",type:\"standard\"},{value:\"8\",type:\"standard\"},{value:\"9\",type:\"standard\"},{value:\"0\",type:\"standard\"},{value:\"<-\",type:\"delete\"}],[{value:\"~\",type:\"standard\"},{value:\"`\",type:\"standard\"},{value:\"|\",type:\"standard\"},{value:\"(\",type:\"standard\"},{value:\")\",type:\"standard\"},{value:\"^\",type:\"standard\"},{value:\"_\",type:\"standard\"},{value:\"-\",type:\"standard\"},{value:\"=\",type:\"standard\"},{value:\"!\",type:\"standard\"},{value:\"Ent\",type:\"enter\"}],[{value:\"@\",type:\"standard\"},{value:\"#\",type:\"standard\"},{value:\"$\",type:\"standard\"},{value:\"%\",type:\"standard\"},{value:\"*\",type:\"standard\"},{value:\"[\",type:\"standard\"},{value:\"]\",type:\"standard\"},{value:\"#\",type:\"standard\"},{value:\"<\",type:\"standard\"},{value:\"?\",type:\"standard\"}],[{value:\"Shift\",type:\"shift\"},{value:\":\",type:\"standard\"},{value:\";\",type:\"standard\"},{value:\"{\",type:\"standard\"},{value:\"}\",type:\"standard\"},{value:\"/\",type:\"standard\"},{value:\"\\\\\",type:\"standard\"},{value:\">\",type:\"standard\"},{value:\"Alt\",type:\"alt\"}],[{value:\"Cancel\",type:\"cancel\"},{value:\"\",type:\"space\"},{value:\",\",type:\"standard\"},{value:\".\",type:\"standard\"},{value:\"Submit\",type:\"submit\"}]]}}]);","// https://gist.github.com/stringparser/a3b0555fd915138a0ed3 edited version from DOM2AFrame\n;[Element].forEach(function (self) {\n\n  //self.prototype.eventListenerList = {}; // shared STATIC object across all instances... NOT what we want\n  self.prototype._addEventListener = self.prototype.addEventListener;\n  self.prototype.addEventListener = function (type, handle, useCapture) {\n\n    if (!this.eventListenerList)\n      this.eventListenerList = {};\n\n    useCapture = useCapture === void 0 ? false : useCapture;\n    var node = this;\n\n    node._addEventListener(type, handle, useCapture);\n    if (!node.eventListenerList[type]) {\n      node.eventListenerList[type] = [];\n    }\n\n    node.eventListenerList[type].push({\n      type: type,\n      handle: handle,\n      useCapture: useCapture,\n      remove: function () {\n        node.removeEventListener(\n          this.type, this.handle, this.useCapture\n        );\n        return node.eventListenerList[type];\n      }\n    });\n\n    if (type != \"eventListenerAdded\" && type != \"eventListenerRemoved\") {\n      let eventDetail = {\n        'type': type,\n        'handle': handle,\n        'useCapture': useCapture\n      };\n      let addedEvent = new CustomEvent(\"eventListenerAdded\", { detail: eventDetail });\n      this.dispatchEvent(addedEvent);\n    }\n  };\n\n\n  self.prototype._removeEventListener = self.prototype.removeEventListener;\n  self.prototype.removeEventListener = function (type, handle, useCapture) {\n\n    if (!this.eventListenerList)\n      this.eventListenerList = {};\n\n    var node = this;\n    if (!node.eventListenerList[type])\n      return;\n\n    node._removeEventListener(type, handle, useCapture);\n    node.eventListenerList[type] = node.eventListenerList[type].filter(\n      function (listener) {\n        return listener && listener.handle && handle && (listener.handle.toString() !== handle.toString()); // native event listener API supports empty handles/listeners, but .toString obviously doesn't\n      }\n    )\n\n    if (node.eventListenerList[type].length === 0) {\n      delete node.eventListenerList[type];\n    }\n\n\n    if (type != \"eventListenerAdded\" && type != \"eventListenerRemoved\") {\n      let eventDetail = {\n        'type': type,\n        'handle': handle,\n        'useCapture': useCapture\n      };\n      let removedEvent = new CustomEvent(\"eventListenerRemoved\", { detail: eventDetail });\n      this.dispatchEvent(removedEvent);\n    }\n  }\n});","import \"./components/scrollbar\";\r\nexport default class Scroll {\r\n    constructor(web2vr) {\r\n        this.web2vr = web2vr;\r\n\r\n        this.hasScroll = false;\r\n        this.scrollBody = false;\r\n        this.scrollContainer = null;\r\n        if (this.web2vr.settings.scroll) {\r\n            this.checkScrollbar();\r\n            if (this.hasScroll)\r\n                this.createScrollbar();\r\n        }\r\n    }\r\n\r\n    checkScrollbar() {\r\n        // entire body scroll\r\n        const body = document.scrollingElement;\r\n        // div container scroll\r\n        const container = this.web2vr.container;\r\n\r\n        if (body.scrollHeight > body.clientHeight) {\r\n            this.hasScroll = true;\r\n            this.scrollContainer = body;\r\n            this.scrollBody = true;\r\n        }\r\n        else if (container.element.style.overflow == \"scroll\") { //container.scrollHeight > container.clientHeight\r\n            this.hasScroll = true;\r\n            this.scrollContainer = container;\r\n        }\r\n    }\r\n\r\n    createScrollbar() {\r\n        this.scrollbar = document.createElement(\"a-entity\");\r\n\r\n        this.pointer = document.createElement(\"a-plane\");\r\n        this.pointer.setAttribute(\"material\", \"shader\", \"flat\");\r\n        this.pointer.setAttribute(\"color\", \"#C1C1C1\");\r\n\r\n        this.plane = document.createElement(\"a-plane\");\r\n        this.plane.setAttribute(\"material\", \"shader\", \"flat\");\r\n        this.plane.setAttribute(\"material\", \"side\", \"double\");\r\n        this.plane.classList.add(this.web2vr.settings.interactiveTag);\r\n        this.plane.setAttribute(\"color\", \"#F1F1F1\");\r\n        this.plane.setAttribute(\"width\", 1);\r\n        this.plane.setAttribute(\"vr-scrollbar\", \"\");\r\n\r\n        // pointers for scroll compoment\r\n        this.plane.web2vr = this.web2vr;\r\n        this.plane.pointer = this.pointer;\r\n        this.plane.scrollbar = this.scrollbar;\r\n\r\n        this.plane.appendChild(this.pointer);\r\n        this.scrollbar.appendChild(this.plane);\r\n        this.web2vr.aframe.container.appendChild(this.scrollbar);\r\n    }\r\n\r\n    update() {\r\n        // there is no need to show scrollbar if the main container is hidden\r\n        if (this.hasScroll) {\r\n            if (this.web2vr.container.element.style.visibility == \"visible\") {\r\n                this.scrollbar.object3D.visible = true;\r\n                this.plane.classList.add(this.web2vr.settings.interactiveTag);\r\n            }\r\n            else if (this.web2vr.container.element.style.visibility == \"hidden\") {\r\n                this.scrollbar.object3D.visible = false;\r\n                this.plane.classList.remove(this.web2vr.settings.interactiveTag);\r\n            }\r\n        }\r\n    }\r\n}","export default class Settings {\r\n    constructor() {\r\n        this.scale = 600;\r\n        this.position = { x: 0, y: 2, z: -1 }\r\n        this.rotation = { x: 0, y: 0, z: 0 }\r\n        this.layerStep = 0.0005; // z space between the layers\r\n\r\n        this.parentSelector= null;\r\n        this.interactiveTag = \"vr-interactable\";\r\n        this.ignoreTags = [\"BR\", \"SOURCE\", \"SCRIPT\", \"AUDIO\", \"NOSCRIPT\"];\r\n\r\n        this.debug = false;\r\n        this.showClipping = false;\r\n        this.forceClipping = false;\r\n        this.experimental = false;\r\n\r\n        this.scroll = true;\r\n        this.scrollWindowHeight = 800;\r\n        this.createControllers = true;\r\n        this.raycasterFar = 5;\r\n        this.skybox = true;\r\n        this.border = true;\r\n    }\r\n}                  ","export default class Helper {\r\n    static isUrl(string) {\r\n        const regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\r\n        return regexp.test(string);\r\n    }\r\n\r\n    static clamp(value, min, max) {\r\n        return Math.min(max, Math.max(min, value));\r\n    }\r\n}","export default class MouseEventHandler {\r\n    constructor(element) {\r\n        this.element = element;\r\n        this.listeningForMouseEvents = false;\r\n        this.resync();\r\n        this.checkEntityEvents();\r\n    }\r\n\r\n    resync() {\r\n        const mouseEvents = [\"click\", \"mouseenter\", \"mouseleave\", \"mousedown\", \"mouseup\"];\r\n        const mouseProperties = [\"onclick\", \"onmouseenter\", \"onmouseleave\", \"onmousedown\", \"onmouseup\"];\r\n\r\n        let hasMouseEventRegistered = false;\r\n        for (const mouseEvent of mouseEvents) {\r\n            if (this.element.domElement.eventListenerList && this.element.domElement.eventListenerList[mouseEvent]) {\r\n                hasMouseEventRegistered = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        let hasMouseProperty = false;\r\n        for (const mouseProperty of mouseProperties) {\r\n            if (this.element.domElement[mouseProperty]) {\r\n                hasMouseProperty = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (hasMouseEventRegistered || hasMouseProperty) {\r\n            if (!this.listeningForMouseEvents) {\r\n                this.addMouseListeners(mouseEvents);\r\n                this.listeningForMouseEvents = true;\r\n            }\r\n        }\r\n        // no event handlers or event properties registered, so we can safely remove our listeners\r\n        else if (this.listeningForMouseEvents) {\r\n            this.removeMouseListeners(mouseEvents);\r\n            this.listeningForMouseEvents = false;\r\n        }\r\n    }\r\n    mouseEventHandler(evt) {\r\n        const mouseEvent = new MouseEvent(evt.type, {\r\n            \"view\": window,\r\n            \"bubbles\": true,\r\n            \"cancelable\": true,\r\n            \"target\": this.element.domElement // maybe?\r\n        });\r\n        this.element.domElement.dispatchEvent(mouseEvent);\r\n    }\r\n\r\n    addMouseListeners(mouseEvents) {\r\n        mouseEvents.forEach(eventName => {\r\n            this.element.entity.addEventListener(eventName, this.mouseEventHandler.bind(this))\r\n        })\r\n    }\r\n\r\n    removeMouseListeners(mouseEvents) {\r\n        mouseEvents.forEach(eventName => {\r\n            this.element.entity.removeEventListener(eventName, this.mouseEventHandler.bind(this))\r\n        });\r\n    }\r\n\r\n    // for hover and input element\r\n    checkEntityEvents() {\r\n        const mouseEvents = [\"click\", \"mouseenter\", \"mouseleave\", \"mousedown\", \"mouseup\"];\r\n        for (const mouseEvent of mouseEvents) {\r\n            if (this.element.entity.eventListenerList && this.element.entity.eventListenerList[mouseEvent]) {\r\n                this.listeningForMouseEvents = true;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}","export default class Position {\r\n    constructor(domPosition, depth, scale) {\r\n        // depth = z\r\n        this.depth = depth;\r\n        this.startDepth = depth;\r\n        this.scale = scale;\r\n        this.scrollY = 0;\r\n        this.updatePosition(domPosition);\r\n    }\r\n\r\n    updatePosition(domPosition) {\r\n        this.domPosition = domPosition;\r\n        this.aframePosition = this.calculateAFramePosition(this.domPosition);\r\n    }\r\n\r\n    calculateAFramePosition(domPosition) {\r\n        // making positions be in center because dom positions are in top left\r\n        const aframePosition = {\r\n            x: domPosition.x + domPosition.width / 2,\r\n            y: domPosition.y + domPosition.height / 2,\r\n            z: this.depth\r\n        };\r\n\r\n        // scaling\r\n        aframePosition.x *= this.scalingFactor;\r\n        aframePosition.y *= this.scalingFactor * -1; // * -1 to match aframe y-axis\r\n\r\n        aframePosition.width = domPosition.width * this.scalingFactor;\r\n        aframePosition.height = domPosition.height * this.scalingFactor;\r\n\r\n        return aframePosition;\r\n    }\r\n\r\n    equalsDOMPosition(domPosition) {\r\n        return this.domPosition.top == domPosition.top && this.domPosition.bottom == domPosition.bottom && this.domPosition.left == domPosition.left && this.domPosition.right == domPosition.right;\r\n    }\r\n\r\n    get scalingFactor() {\r\n        return 1 / this.scale;\r\n    }\r\n\r\n    get x() {\r\n        return this.aframePosition.x;\r\n    }\r\n\r\n    get y() {\r\n        return this.aframePosition.y + this.scrollY;\r\n    }\r\n\r\n    get z() {\r\n        return this.aframePosition.z;\r\n    }\r\n\r\n    get width() {\r\n        return this.aframePosition.width;\r\n    }\r\n\r\n    get height() {\r\n        return this.aframePosition.height;\r\n    }\r\n\r\n    // vector3\r\n    get xyz() {\r\n        return { x: this.x, y: this.y, z: this.z };\r\n    }\r\n\r\n    get left() {\r\n        return { x: this.x - this.width / 2, y: this.y, z: this.z };\r\n    }\r\n\r\n    get right() {\r\n        return { x: this.x + this.width / 2, y: this.y, z: this.z };\r\n    }\r\n\r\n    get top() {\r\n        return { x: this.x, y: this.y + this.height / 2, z: this.z };\r\n    }\r\n\r\n    get bottom() {\r\n        return { x: this.x, y: this.y - this.height / 2, z: this.z };\r\n    }\r\n\r\n}","import \"./plugins/eventListenerListPlugin\"; // Get all event listeners for DOM elements\r\nimport Deepmerge from \"deepmerge\";\r\nimport \"aframe\";\r\nimport \"aframe-gif-shader\";\r\nimport \"./plugins/aframe-keyboard.min\";\r\nimport \"super-hands\";\r\nimport Settings from \"./settings\";\r\nimport \"./components/border\";\r\nimport \"./components/animate\";\r\nimport \"./components/grabRotateStatic\";\r\nimport Scroll from \"./scroll\"\r\nimport AframeContext from \"./aframeContext\";\r\nimport ContainerElement from \"./elements/containerElement\";\r\nimport TextElement from \"./elements/textElement\";\r\nimport ImageElement from \"./elements/imageElement\";\r\nimport VideoElement from \"./elements/videoElement\";\r\nimport CheckBoxElement from \"./elements/checkboxElement\";\r\nimport RadioElement from \"./elements/radioElement\";\r\nimport InputElement from \"./elements/inputElement\";\r\nimport ButtonElement from \"./elements/buttonElement\";\r\nimport SvgElement from \"./elements/svgElement\";\r\nimport CanvasElement from \"./elements/canvasElement\";\r\n\r\nexport default class Web2VR {\r\n    constructor(container, settings = {}) {\r\n        // main div container\r\n        if (container.nodeType == Node.ELEMENT_NODE)\r\n            this.container = container;\r\n        else\r\n            this.container = document.querySelector(container);\r\n\r\n        // deep merge settings\r\n        this.settings = Deepmerge(new Settings(), settings, {\r\n            arrayMerge: (destination, source) => {\r\n                return [...destination, ...source];\r\n            }\r\n        });\r\n        // disable borders if its mobile because LineBasicMaterial doesnt work well on mobile\r\n        if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isOculusBrowser())\r\n            this.settings.border = false;\r\n\r\n        // aframe context\r\n        this.aframe = new AframeContext(this.settings);\r\n        // vr elements\r\n        this.elements = new Set();\r\n        // set of all the hover css selectors\r\n        this.hoverSelectors = new Set();\r\n        this.observer = null;\r\n        // observer parametars\r\n        this.observerConfig = { childList: true, subtree: true, characterData: true, attributes: true };//attributeFilter: [\"style\", \"class\", \"id\"]\r\n        this.updating = false;\r\n\r\n        // experimental only\r\n        this.html2canvasIDcounter = 0;\r\n    }\r\n\r\n    // find all hover css rules and add {selector}hover class to them\r\n    findHoverCss() {\r\n        try {\r\n            for (const styleSheet of [...document.styleSheets]) {\r\n                for (const rule of [...styleSheet.cssRules]) {\r\n                    if (rule instanceof CSSStyleRule) {\r\n                        const selectors = rule.selectorText.split(\",\");\r\n                        for (const selector of selectors) {\r\n                            const sel = selector.split(\":\");\r\n                            // is hover\r\n                            if (sel[1] == \"hover\") {\r\n                                const s = sel[0].replace(/\\s/g, '');\r\n                                if (s[0] == \".\")\r\n                                    rule.selectorText += `, ${s}hover`;\r\n                                else if (s[0] == \"#\")\r\n                                    rule.selectorText += `, .${s.substr(1)}hover`;\r\n                                else\r\n                                    rule.selectorText += `, .${s}hover`;\r\n                                this.hoverSelectors.add(s);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    // add all svg needed styles to defs inside svg so we can convert svg to png with all styles applied \r\n    generateStyleDefs(svgDomElement) {\r\n        let styleDefs = \"\";\r\n        const sheets = document.styleSheets;\r\n        for (let i = 0; i < sheets.length; i++) {\r\n            const rules = sheets[i].cssRules;\r\n            for (let j = 0; j < rules.length; j++) {\r\n                const rule = rules[j];\r\n                if (rule.style) {\r\n                    const selectorText = rule.selectorText;\r\n                    const elems = svgDomElement.querySelectorAll(selectorText);\r\n                    if (elems.length) {\r\n                        styleDefs += selectorText + \" { \" + rule.style.cssText + \" }\\n\";\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const s = document.createElement('style');\r\n        s.setAttribute('type', 'text/css');\r\n        s.innerHTML = styleDefs;\r\n\r\n        const defs = document.createElement('defs');\r\n        defs.appendChild(s);\r\n        svgDomElement.insertBefore(defs, svgDomElement.firstChild);\r\n    }\r\n\r\n    start() {\r\n        this.findHoverCss();\r\n\r\n        if (!this.aframe.scene.hasLoaded)\r\n            this.aframe.scene.addEventListener(\"loaded\", this.init(), { once: true });\r\n        else\r\n            this.init();\r\n    }\r\n\r\n    init() {\r\n        this.aframe.createContainer(this);\r\n        this.aframe.createSky();\r\n        this.aframe.createControllers();\r\n\r\n        this.convertToVR();\r\n        // scroll feature\r\n        this.scroll = new Scroll(this);\r\n\r\n        this.allLoadedUpdate();\r\n    }\r\n\r\n    // update once after all images are loaded in the dom\r\n    allLoadedUpdate() {\r\n        const interval = setInterval(() => {\r\n            let allLoaded = true;\r\n            for (const element of this.elements)\r\n                if (element instanceof ImageElement && !element.loaded)\r\n                    allLoaded = false;\r\n            if (allLoaded) {\r\n                this.update();\r\n                clearInterval(interval);\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    addElement(domElement, parentElement, layer) {\r\n        // ignore tag if in ignoreTags list or text element(vr-span) is already added\r\n        if (this.settings.ignoreTags.includes(domElement.tagName) || (domElement.classList && domElement.classList.contains(\"vr-span\")))\r\n            return null;\r\n\r\n        let element = null;\r\n        // its text node and not empty\r\n        if (domElement.nodeType == Node.TEXT_NODE && domElement.nodeValue.trim()) {\r\n            const span = document.createElement(\"span\");\r\n            span.classList.add(\"vr-span\");\r\n            span.textContent = domElement.textContent;\r\n\r\n            // dont want observer to listen changes when adding(replacing) span text into dom\r\n            if (this.observer)\r\n                this.observer.disconnect();\r\n            domElement.replaceWith(span);\r\n            if (this.observer)\r\n                this.observer.observe(this.container, this.observerConfig);\r\n\r\n            element = new TextElement(this, span, layer);\r\n        }\r\n        // for future convert this to switch statement\r\n        else if (domElement.tagName == \"VIDEO\")\r\n            element = new VideoElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"IMG\")\r\n            element = new ImageElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"svg\")\r\n            element = new SvgElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"CANVAS\")\r\n            element = new CanvasElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"BUTTON\")\r\n            element = new ButtonElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"TEXTAREA\")\r\n            element = new InputElement(this, domElement, layer);\r\n        else if (domElement.tagName == \"INPUT\") {\r\n            const type = domElement.getAttribute(\"type\");\r\n            if (type == \"checkbox\")\r\n                element = new CheckBoxElement(this, domElement, layer);\r\n            else if (type == \"radio\")\r\n                element = new RadioElement(this, domElement, layer);\r\n            else if ([\"text\", \"email\", \"number\", \"password\", \"search\", \"tel\", \"url\"].includes(type))\r\n                element = new InputElement(this, domElement, layer);\r\n            else if ([\"button\", \"submit\", \"reset\"].includes(type)) {\r\n                element = new ButtonElement(this, domElement, layer);\r\n            }\r\n            else\r\n                return;\r\n        }\r\n        // any other type of element will be container\r\n        else if (domElement.nodeType == Node.ELEMENT_NODE) {\r\n            element = new ContainerElement(this, domElement, layer);\r\n        }\r\n        else\r\n            return;\r\n\r\n        this.elements.add(element);\r\n        this.aframe.container.appendChild(element.entity);\r\n\r\n        if (this.settings.debug)\r\n            console.log(\"Added element\", element);\r\n\r\n        // init element and add element to parent children when aframe entity is loaded(play)\r\n        const onLoaded = (event) => {\r\n            if (parentElement)\r\n                parentElement.childElements.add(element);\r\n            element.init();\r\n            element.update();\r\n        };\r\n        element.entity.addEventListener(\"play\", onLoaded, { once: true });\r\n\r\n        return element;\r\n    }\r\n\r\n    removeElement(element) {\r\n        // remove the element\r\n        this.aframe.container.removeChild(element.entity);\r\n        this.elements.delete(element);\r\n        // remove all the children of the element recursively\r\n        for (const child of element.childElements) {\r\n            this.removeElement(child);\r\n        }\r\n    }\r\n\r\n    // start at root and interate over child nodes recursively\r\n    addElementChildren(currentNode, parentElement = null, layer = 0) {\r\n        if (currentNode.tagName == \"svg\")\r\n            this.generateStyleDefs(currentNode);\r\n\r\n        const element = this.addElement(currentNode, parentElement, layer);\r\n        // not supported tags or svg element that we dont need to check its children\r\n        if (!element || element instanceof SvgElement)\r\n            return;\r\n\r\n        if (currentNode.childNodes && currentNode.childNodes.length > 0) {\r\n            layer++;\r\n            for (const child of currentNode.childNodes)\r\n                this.addElementChildren(child, element, layer);\r\n        }\r\n    }\r\n\r\n    convertToVR() {\r\n        this.addElementChildren(this.container);\r\n        // observer dom element changes and for newly added and deleted dom elements\r\n        this.observer = new MutationObserver((mutations) => {\r\n            for (const mutation of mutations) {\r\n                let emptyRemove = false;\r\n                for (const node of mutation.removedNodes) {\r\n                    // not empty textNode\r\n                    if (!(node.nodeType == Node.TEXT_NODE && !node.nodeValue.trim()))\r\n                        this.removeElement(node.element);\r\n                    else\r\n                        emptyRemove = true;\r\n                }\r\n\r\n                for (const node of mutation.addedNodes)\r\n                    this.addElementChildren(node, mutation.target.element, mutation.target.element.layer + 1);\r\n\r\n                if (!emptyRemove) {\r\n                    // when adding new nodes we also need to check for new loaded images\r\n                    if (mutation.addedNodes.length > 0)\r\n                        this.allLoadedUpdate();\r\n                    else\r\n                        this.update();\r\n                }\r\n            }\r\n        });\r\n        this.observer.observe(this.container, this.observerConfig);\r\n    }\r\n\r\n    update() {\r\n        // we check for updating so we dont do multiple updating at same time from the async functions\r\n        this.updating = true;\r\n        if (this.updating) {\r\n            // using try and catch because sometimes when element is removed it calls update after and it wont find element, the errors doesnt matter because the final result is the same\r\n            try {\r\n                for (const element of this.elements)\r\n                    element.update();\r\n            }\r\n            catch (err) {\r\n                console.error(err);\r\n            }\r\n            this.scroll.update();\r\n            this.updating = false;\r\n        }\r\n    }\r\n}","module.exports = __WEBPACK_EXTERNAL_MODULE_aframe__;"],"sourceRoot":""}